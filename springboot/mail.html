<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>邮件发送的 5 种姿势 | 江南一点雨</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="https://open.weixin.qq.com/qr/code?username=a_javaboy">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.3f949b7f.css" as="style"><link rel="preload" href="/assets/js/app.93cfb041.js" as="script"><link rel="preload" href="/assets/js/2.afd40777.js" as="script"><link rel="preload" href="/assets/js/109.7e4e3e84.js" as="script"><link rel="prefetch" href="/assets/js/10.f65a90e2.js"><link rel="prefetch" href="/assets/js/100.3bcf32ff.js"><link rel="prefetch" href="/assets/js/101.bd9ebd49.js"><link rel="prefetch" href="/assets/js/102.392f968e.js"><link rel="prefetch" href="/assets/js/103.afadf5bf.js"><link rel="prefetch" href="/assets/js/104.c8312846.js"><link rel="prefetch" href="/assets/js/105.97a4170a.js"><link rel="prefetch" href="/assets/js/106.9f0ef153.js"><link rel="prefetch" href="/assets/js/107.bb303c1b.js"><link rel="prefetch" href="/assets/js/108.45e76aae.js"><link rel="prefetch" href="/assets/js/11.5e8094b3.js"><link rel="prefetch" href="/assets/js/110.839e4506.js"><link rel="prefetch" href="/assets/js/111.50cc5969.js"><link rel="prefetch" href="/assets/js/112.715e408b.js"><link rel="prefetch" href="/assets/js/113.aaba78f1.js"><link rel="prefetch" href="/assets/js/114.6a025439.js"><link rel="prefetch" href="/assets/js/115.8b36028e.js"><link rel="prefetch" href="/assets/js/116.2aa7851e.js"><link rel="prefetch" href="/assets/js/117.75ea5460.js"><link rel="prefetch" href="/assets/js/118.26bc5dca.js"><link rel="prefetch" href="/assets/js/119.0f7df258.js"><link rel="prefetch" href="/assets/js/12.4f05d2f8.js"><link rel="prefetch" href="/assets/js/120.f7b3a0ed.js"><link rel="prefetch" href="/assets/js/121.cf863463.js"><link rel="prefetch" href="/assets/js/122.fa3cfbdb.js"><link rel="prefetch" href="/assets/js/123.adc5157d.js"><link rel="prefetch" href="/assets/js/124.fbe6a3bf.js"><link rel="prefetch" href="/assets/js/125.d3e4c526.js"><link rel="prefetch" href="/assets/js/126.2667f20c.js"><link rel="prefetch" href="/assets/js/127.a992245e.js"><link rel="prefetch" href="/assets/js/128.e2dc5f84.js"><link rel="prefetch" href="/assets/js/129.276d62b1.js"><link rel="prefetch" href="/assets/js/13.6be298bf.js"><link rel="prefetch" href="/assets/js/130.df0fd4f2.js"><link rel="prefetch" href="/assets/js/131.e4e2b4dd.js"><link rel="prefetch" href="/assets/js/132.42ac2755.js"><link rel="prefetch" href="/assets/js/133.4d19914d.js"><link rel="prefetch" href="/assets/js/134.eee5f7f1.js"><link rel="prefetch" href="/assets/js/135.63554b27.js"><link rel="prefetch" href="/assets/js/136.a6bc1760.js"><link rel="prefetch" href="/assets/js/137.5fc69fd8.js"><link rel="prefetch" href="/assets/js/138.de23da83.js"><link rel="prefetch" href="/assets/js/139.a1faeb31.js"><link rel="prefetch" href="/assets/js/14.815db104.js"><link rel="prefetch" href="/assets/js/140.95dbf73f.js"><link rel="prefetch" href="/assets/js/141.b4542eae.js"><link rel="prefetch" href="/assets/js/142.f9296937.js"><link rel="prefetch" href="/assets/js/143.9ea81dee.js"><link rel="prefetch" href="/assets/js/144.a423b13c.js"><link rel="prefetch" href="/assets/js/145.7da590a6.js"><link rel="prefetch" href="/assets/js/146.bca8af1b.js"><link rel="prefetch" href="/assets/js/147.0aa847b1.js"><link rel="prefetch" href="/assets/js/148.8e722bc5.js"><link rel="prefetch" href="/assets/js/149.082e9ce8.js"><link rel="prefetch" href="/assets/js/15.f278054c.js"><link rel="prefetch" href="/assets/js/150.57c0d03e.js"><link rel="prefetch" href="/assets/js/151.bfeac464.js"><link rel="prefetch" href="/assets/js/152.1ed78952.js"><link rel="prefetch" href="/assets/js/153.51ae1560.js"><link rel="prefetch" href="/assets/js/154.a6f7351f.js"><link rel="prefetch" href="/assets/js/155.8cb2b9b7.js"><link rel="prefetch" href="/assets/js/156.baf79d5d.js"><link rel="prefetch" href="/assets/js/157.6dc937e3.js"><link rel="prefetch" href="/assets/js/158.f9688b9c.js"><link rel="prefetch" href="/assets/js/159.9c2d77a9.js"><link rel="prefetch" href="/assets/js/16.345bdcfc.js"><link rel="prefetch" href="/assets/js/160.c928cf3c.js"><link rel="prefetch" href="/assets/js/161.5d3727ba.js"><link rel="prefetch" href="/assets/js/162.bb1e7f33.js"><link rel="prefetch" href="/assets/js/163.049f7d18.js"><link rel="prefetch" href="/assets/js/164.a480bd3f.js"><link rel="prefetch" href="/assets/js/165.c8f91cd5.js"><link rel="prefetch" href="/assets/js/166.f0a0e356.js"><link rel="prefetch" href="/assets/js/167.54930ff6.js"><link rel="prefetch" href="/assets/js/168.2702d69f.js"><link rel="prefetch" href="/assets/js/169.44923723.js"><link rel="prefetch" href="/assets/js/17.a076d059.js"><link rel="prefetch" href="/assets/js/170.0e2e92d4.js"><link rel="prefetch" href="/assets/js/171.e63c9b1d.js"><link rel="prefetch" href="/assets/js/172.c18ef95a.js"><link rel="prefetch" href="/assets/js/173.a78b9057.js"><link rel="prefetch" href="/assets/js/174.35a568dc.js"><link rel="prefetch" href="/assets/js/175.aaff1ff2.js"><link rel="prefetch" href="/assets/js/176.10d8a2e2.js"><link rel="prefetch" href="/assets/js/177.83ea0cb0.js"><link rel="prefetch" href="/assets/js/178.3c9de5ed.js"><link rel="prefetch" href="/assets/js/179.28e6d588.js"><link rel="prefetch" href="/assets/js/18.542b7e9d.js"><link rel="prefetch" href="/assets/js/180.6c49aa48.js"><link rel="prefetch" href="/assets/js/181.5a053633.js"><link rel="prefetch" href="/assets/js/182.b23e7d08.js"><link rel="prefetch" href="/assets/js/183.ee09403b.js"><link rel="prefetch" href="/assets/js/184.94593e4b.js"><link rel="prefetch" href="/assets/js/185.ea14675f.js"><link rel="prefetch" href="/assets/js/186.105f44fd.js"><link rel="prefetch" href="/assets/js/187.13bdebf6.js"><link rel="prefetch" href="/assets/js/188.df5be68c.js"><link rel="prefetch" href="/assets/js/189.8feb4ee4.js"><link rel="prefetch" href="/assets/js/19.741384a0.js"><link rel="prefetch" href="/assets/js/190.8c35be02.js"><link rel="prefetch" href="/assets/js/191.9bbb2940.js"><link rel="prefetch" href="/assets/js/192.77be398f.js"><link rel="prefetch" href="/assets/js/193.401d4d9e.js"><link rel="prefetch" href="/assets/js/194.ce411ee2.js"><link rel="prefetch" href="/assets/js/195.10a07ccc.js"><link rel="prefetch" href="/assets/js/196.74cbc7e7.js"><link rel="prefetch" href="/assets/js/197.5d03c5b7.js"><link rel="prefetch" href="/assets/js/198.c298c39b.js"><link rel="prefetch" href="/assets/js/199.29ec26b9.js"><link rel="prefetch" href="/assets/js/20.4c668583.js"><link rel="prefetch" href="/assets/js/200.9b042f85.js"><link rel="prefetch" href="/assets/js/201.ce4fe568.js"><link rel="prefetch" href="/assets/js/202.97cae704.js"><link rel="prefetch" href="/assets/js/203.9f870d68.js"><link rel="prefetch" href="/assets/js/204.2796778b.js"><link rel="prefetch" href="/assets/js/205.8efe9247.js"><link rel="prefetch" href="/assets/js/206.ff06ce73.js"><link rel="prefetch" href="/assets/js/207.0402326b.js"><link rel="prefetch" href="/assets/js/208.2bd6489b.js"><link rel="prefetch" href="/assets/js/209.ca24b4e7.js"><link rel="prefetch" href="/assets/js/21.aebbbd15.js"><link rel="prefetch" href="/assets/js/210.4d61626d.js"><link rel="prefetch" href="/assets/js/211.6c198d71.js"><link rel="prefetch" href="/assets/js/212.52494de3.js"><link rel="prefetch" href="/assets/js/213.43f986d0.js"><link rel="prefetch" href="/assets/js/214.3403d0f9.js"><link rel="prefetch" href="/assets/js/215.ba7b6da8.js"><link rel="prefetch" href="/assets/js/216.ecbe6232.js"><link rel="prefetch" href="/assets/js/217.70deb9f1.js"><link rel="prefetch" href="/assets/js/218.de783ea7.js"><link rel="prefetch" href="/assets/js/219.4efc57bc.js"><link rel="prefetch" href="/assets/js/22.f361a824.js"><link rel="prefetch" href="/assets/js/220.5dc860c4.js"><link rel="prefetch" href="/assets/js/221.7a3c5614.js"><link rel="prefetch" href="/assets/js/222.b5a275ab.js"><link rel="prefetch" href="/assets/js/223.a8ea0f32.js"><link rel="prefetch" href="/assets/js/224.b2f5c374.js"><link rel="prefetch" href="/assets/js/225.0ab9bbe5.js"><link rel="prefetch" href="/assets/js/226.73ddbdc1.js"><link rel="prefetch" href="/assets/js/227.a8617bac.js"><link rel="prefetch" href="/assets/js/228.184e2034.js"><link rel="prefetch" href="/assets/js/229.a7efe08d.js"><link rel="prefetch" href="/assets/js/23.a04c99fe.js"><link rel="prefetch" href="/assets/js/230.49a88e1b.js"><link rel="prefetch" href="/assets/js/231.a422f33e.js"><link rel="prefetch" href="/assets/js/232.c323a194.js"><link rel="prefetch" href="/assets/js/233.5edbdef4.js"><link rel="prefetch" href="/assets/js/234.9f0a13bb.js"><link rel="prefetch" href="/assets/js/235.54a4fc37.js"><link rel="prefetch" href="/assets/js/236.d2d69ec5.js"><link rel="prefetch" href="/assets/js/237.64f6dcea.js"><link rel="prefetch" href="/assets/js/238.61c501f3.js"><link rel="prefetch" href="/assets/js/239.a33bb2dd.js"><link rel="prefetch" href="/assets/js/24.5bc3cf94.js"><link rel="prefetch" href="/assets/js/240.f7f4c0ba.js"><link rel="prefetch" href="/assets/js/241.65fc5fa2.js"><link rel="prefetch" href="/assets/js/242.0491824c.js"><link rel="prefetch" href="/assets/js/243.3f9577d5.js"><link rel="prefetch" href="/assets/js/244.9649ec6d.js"><link rel="prefetch" href="/assets/js/245.fdcca161.js"><link rel="prefetch" href="/assets/js/246.c83c6714.js"><link rel="prefetch" href="/assets/js/247.6677979b.js"><link rel="prefetch" href="/assets/js/248.97ea5089.js"><link rel="prefetch" href="/assets/js/249.d7170cdf.js"><link rel="prefetch" href="/assets/js/25.b67b3873.js"><link rel="prefetch" href="/assets/js/250.8adf3d86.js"><link rel="prefetch" href="/assets/js/251.86300af7.js"><link rel="prefetch" href="/assets/js/252.0e3ede05.js"><link rel="prefetch" href="/assets/js/253.586d912a.js"><link rel="prefetch" href="/assets/js/254.f521f0b4.js"><link rel="prefetch" href="/assets/js/255.0c8cdb1a.js"><link rel="prefetch" href="/assets/js/256.ec7f9c17.js"><link rel="prefetch" href="/assets/js/257.6dc36fca.js"><link rel="prefetch" href="/assets/js/258.9930d469.js"><link rel="prefetch" href="/assets/js/259.bdc389e2.js"><link rel="prefetch" href="/assets/js/26.d41155d3.js"><link rel="prefetch" href="/assets/js/260.7244b3ab.js"><link rel="prefetch" href="/assets/js/261.a0afac4b.js"><link rel="prefetch" href="/assets/js/262.431d6a82.js"><link rel="prefetch" href="/assets/js/263.c0899c3e.js"><link rel="prefetch" href="/assets/js/264.64a2a420.js"><link rel="prefetch" href="/assets/js/265.b0cad44b.js"><link rel="prefetch" href="/assets/js/266.21b77a2f.js"><link rel="prefetch" href="/assets/js/27.3c4a072d.js"><link rel="prefetch" href="/assets/js/28.4e74f69f.js"><link rel="prefetch" href="/assets/js/29.14f28039.js"><link rel="prefetch" href="/assets/js/3.2f237a9d.js"><link rel="prefetch" href="/assets/js/30.36410792.js"><link rel="prefetch" href="/assets/js/31.6ffd719e.js"><link rel="prefetch" href="/assets/js/32.bfd5c2e9.js"><link rel="prefetch" href="/assets/js/33.16929d80.js"><link rel="prefetch" href="/assets/js/34.361a9575.js"><link rel="prefetch" href="/assets/js/35.1c66b905.js"><link rel="prefetch" href="/assets/js/36.53256ba6.js"><link rel="prefetch" href="/assets/js/37.da2558ed.js"><link rel="prefetch" href="/assets/js/38.30d9e621.js"><link rel="prefetch" href="/assets/js/39.4818defd.js"><link rel="prefetch" href="/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/assets/js/40.636eea27.js"><link rel="prefetch" href="/assets/js/41.0018ba6b.js"><link rel="prefetch" href="/assets/js/42.6ecc2862.js"><link rel="prefetch" href="/assets/js/43.58a75ee3.js"><link rel="prefetch" href="/assets/js/44.74a32a06.js"><link rel="prefetch" href="/assets/js/45.03250a20.js"><link rel="prefetch" href="/assets/js/46.52f68306.js"><link rel="prefetch" href="/assets/js/47.36e85e4f.js"><link rel="prefetch" href="/assets/js/48.49d57bca.js"><link rel="prefetch" href="/assets/js/49.b38b2ad5.js"><link rel="prefetch" href="/assets/js/5.d87988f8.js"><link rel="prefetch" href="/assets/js/50.56cc433e.js"><link rel="prefetch" href="/assets/js/51.c40a0825.js"><link rel="prefetch" href="/assets/js/52.63567257.js"><link rel="prefetch" href="/assets/js/53.3e42ed99.js"><link rel="prefetch" href="/assets/js/54.2761720e.js"><link rel="prefetch" href="/assets/js/55.4cb6db86.js"><link rel="prefetch" href="/assets/js/56.469a92f3.js"><link rel="prefetch" href="/assets/js/57.46afff20.js"><link rel="prefetch" href="/assets/js/58.7ef30381.js"><link rel="prefetch" href="/assets/js/59.744cb435.js"><link rel="prefetch" href="/assets/js/6.3a554393.js"><link rel="prefetch" href="/assets/js/60.094ab0a3.js"><link rel="prefetch" href="/assets/js/61.119e8b2e.js"><link rel="prefetch" href="/assets/js/62.565108d9.js"><link rel="prefetch" href="/assets/js/63.4c7edb02.js"><link rel="prefetch" href="/assets/js/64.54bb5e4b.js"><link rel="prefetch" href="/assets/js/65.42f707a8.js"><link rel="prefetch" href="/assets/js/66.c98dc6b7.js"><link rel="prefetch" href="/assets/js/67.ba6a3acd.js"><link rel="prefetch" href="/assets/js/68.a02a3b0b.js"><link rel="prefetch" href="/assets/js/69.cd233ec0.js"><link rel="prefetch" href="/assets/js/7.bab1dbf2.js"><link rel="prefetch" href="/assets/js/70.f1295eda.js"><link rel="prefetch" href="/assets/js/71.e1d95891.js"><link rel="prefetch" href="/assets/js/72.f5c3f64f.js"><link rel="prefetch" href="/assets/js/73.9d99f345.js"><link rel="prefetch" href="/assets/js/74.ad8f1d8c.js"><link rel="prefetch" href="/assets/js/75.c9fb45f8.js"><link rel="prefetch" href="/assets/js/76.b1d611d5.js"><link rel="prefetch" href="/assets/js/77.a04577e3.js"><link rel="prefetch" href="/assets/js/78.9ba11b90.js"><link rel="prefetch" href="/assets/js/79.420221c7.js"><link rel="prefetch" href="/assets/js/8.889a2b8d.js"><link rel="prefetch" href="/assets/js/80.9ec1d712.js"><link rel="prefetch" href="/assets/js/81.ecb47b58.js"><link rel="prefetch" href="/assets/js/82.778e423a.js"><link rel="prefetch" href="/assets/js/83.2b8384d4.js"><link rel="prefetch" href="/assets/js/84.cabc5b04.js"><link rel="prefetch" href="/assets/js/85.a094bd7c.js"><link rel="prefetch" href="/assets/js/86.cc9676aa.js"><link rel="prefetch" href="/assets/js/87.8a5e2ad5.js"><link rel="prefetch" href="/assets/js/88.35140b15.js"><link rel="prefetch" href="/assets/js/89.333e2b0b.js"><link rel="prefetch" href="/assets/js/9.b81dc625.js"><link rel="prefetch" href="/assets/js/90.2faba253.js"><link rel="prefetch" href="/assets/js/91.29ab2e40.js"><link rel="prefetch" href="/assets/js/92.8fa6f536.js"><link rel="prefetch" href="/assets/js/93.15279ab5.js"><link rel="prefetch" href="/assets/js/94.b576dde8.js"><link rel="prefetch" href="/assets/js/95.00c825c5.js"><link rel="prefetch" href="/assets/js/96.cb4857a8.js"><link rel="prefetch" href="/assets/js/97.7fd4177a.js"><link rel="prefetch" href="/assets/js/98.166528c5.js"><link rel="prefetch" href="/assets/js/99.4385d414.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f949b7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://open.weixin.qq.com/qr/code?username=a_javaboy" alt="江南一点雨" class="logo"> <span class="site-name can-hide">江南一点雨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="http://www.javaboy.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国际站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.itboyhub.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="http://www.javaboy.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国际站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.itboyhub.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/ssm/" class="sidebar-heading clickable"><span>SSM</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable open"><span>Maven</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ssm/maven/info.html" class="sidebar-link">Maven 介绍</a></li><li><a href="/ssm/maven/install.html" class="sidebar-link">Maven 安装</a></li><li><a href="/ssm/maven/config.html" class="sidebar-link">Maven 配置</a></li><li><a href="/ssm/maven/maven.html" class="sidebar-link">Maven 常用命令</a></li><li><a href="/ssm/maven/idea.html" class="sidebar-link">IDEA 中使用 Maven</a></li><li><a href="/ssm/maven/dependency.html" class="sidebar-link">Maven 依赖管理</a></li><li><a href="/ssm/maven/nexus.html" class="sidebar-link">Maven 私服</a></li><li><a href="/ssm/maven/pom.html" class="sidebar-link">聚合工程</a></li><li><a href="/ssm/maven/download.html" class="sidebar-link">教程下载</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable"><span>Spring</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable"><span>SpringMVC</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable"><span>MyBatis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable"><span>Spring 源码</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable"><span>SpringMVC 进阶</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable"><span>WebFlux</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/springboot/" class="sidebar-heading clickable router-link-active open"><span>SpringBoot</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>基本配置</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>整合视图层</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>Web开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>数据持久化</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>整合 Redis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>RESTful</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>安全管理</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active open"><span>其他</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/springboot/devtools.html" class="sidebar-link">热部署</a></li><li><a href="/springboot/jar.html" class="sidebar-link">可执行 jar 分析</a></li><li><a href="/springboot/docker.html" class="sidebar-link">部署到远程 Docker 容器</a></li><li><a href="/springboot/jib.html" class="sidebar-link">使用 Jib 部署 Spring Boot</a></li><li><a href="/springboot/mail.html" aria-current="page" class="active sidebar-link">邮件发送的 5 种姿势</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/springboot/mail.html#发送简单邮件" class="sidebar-link">发送简单邮件</a></li><li class="sidebar-sub-header"><a href="/springboot/mail.html#发送带附件的邮件" class="sidebar-link">发送带附件的邮件</a></li><li class="sidebar-sub-header"><a href="/springboot/mail.html#发送带图片资源的邮件" class="sidebar-link">发送带图片资源的邮件</a></li><li class="sidebar-sub-header"><a href="/springboot/mail.html#使用-freemarker-作邮件模板" class="sidebar-link">使用 Freemarker 作邮件模板</a></li><li class="sidebar-sub-header"><a href="/springboot/mail.html#使用-thymeleaf-作邮件模板" class="sidebar-link">使用 Thymeleaf 作邮件模板</a></li></ul></li><li><a href="/springboot/springsession-bug.html" class="sidebar-link">Spring Session 中的 Bug</a></li><li><a href="/springboot/freemarker-bug.html" class="sidebar-link">Spring Boot 2.2.0 中的 Bug</a></li><li><a href="/springboot/weixin.html" class="sidebar-link">开发微信公众号后台(一)</a></li><li><a href="/springboot/weixin-2.html" class="sidebar-link">开发微信公众号后台(二)</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable router-link-active"><span>面试题</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/oauth2/" class="sidebar-heading clickable"><span>OAuth2</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/oauth2/oauth2-info.html" class="sidebar-link">OAuth2 简介</a></li><li><a href="/oauth2/oauth2_authorization_code.html" class="sidebar-link">授权码模式</a></li><li><a href="/oauth2/oauth2-password-implicit.html" class="sidebar-link">四种认证模式</a></li><li><a href="/oauth2/oauth2-redis.html" class="sidebar-link">引入 Redis</a></li><li><a href="/oauth2/oauth2-jwt.html" class="sidebar-link">引入 JWT</a></li><li><a href="/oauth2/spring-cloud-oauth2.html" class="sidebar-link">微服务安全管理思路</a></li><li><a href="/oauth2/oauth2-sso.html" class="sidebar-link">单点登录</a></li><li><a href="/oauth2/github-oauth2.html" class="sidebar-link">接入 GitHub 第三方登录</a></li><li><a href="/oauth2/custom-token-info.html" class="sidebar-link">自定义返回的 Token 信息</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/springsecurity/" class="sidebar-heading clickable"><span>SpringSecurity</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/springsecurity/spring-security-guide.html" class="sidebar-link">Spring Security 简介</a></li><li><a href="/springsecurity/spring-security-form-login.html" class="sidebar-link">入门 Spring Security</a></li><li><a href="/springsecurity/spring-security-custom-formlogin.html" class="sidebar-link">定制表单登录</a></li><li><a href="/springsecurity/spring-security-json.html" class="sidebar-link">使用 JSON 交互</a></li><li><a href="/springsecurity/spring-security-authorization.html" class="sidebar-link">授权操作</a></li><li><a href="/springsecurity/spring-security-JdbcUserDetailsManager.html" class="sidebar-link">将用户数据存入数据库</a></li><li><a href="/springsecurity/springsecurity-springdatajpa.html" class="sidebar-link">Spring Data Jpa 做持久化</a></li><li><a href="/springsecurity/rememberme.html" class="sidebar-link">自动登录功能</a></li><li><a href="/springsecurity/rememberme-advance.html" class="sidebar-link">自动登录的安全风险</a></li><li><a href="/springsecurity/spring-security-vs-shiro.html" class="sidebar-link">Spring Security Vs Shiro</a></li><li><a href="/springsecurity/custom-authentication.html" class="sidebar-link">自定义认证逻辑(高级玩法)</a></li><li><a href="/springsecurity/details.html" class="sidebar-link">快速查看登录用户 IP</a></li><li><a href="/springsecurity/session-management.html" class="sidebar-link">自动踢掉前一个登录用户</a></li><li><a href="/springsecurity/springboot-vue-session-management.html" class="sidebar-link">Spring Boot + Vue 踢掉已登录用户</a></li><li><a href="/springsecurity/springsecurity-stricthttpfirewall.html" class="sidebar-link">HttpFirewall</a></li><li><a href="/springsecurity/springsecurity-sfa.html" class="sidebar-link">防御会话固定攻击</a></li><li><a href="/springsecurity/springsecurity-spring-session.html" class="sidebar-link">集群化环境处理 session 共享</a></li><li><a href="/springsecurity/springsecurity-csrf.html" class="sidebar-link">防御 CSRF 攻击</a></li><li><a href="/springsecurity/springsecurity-csrf-sourcecode.html" class="sidebar-link">CSRF 防御源码</a></li><li><a href="/springsecurity/springsecurity-passwordencoder.html" class="sidebar-link">密码加密的两种姿势</a></li><li><a href="/springsecurity/springsecurity-study.html" class="sidebar-link">Spring Security 要怎么学</a></li><li><a href="/springsecurity/springsecurity-ignoring.html" class="sidebar-link">两种资源放行策略</a></li><li><a href="/springsecurity/springsecurity-cas.html" class="sidebar-link">CAS 单点登录</a></li><li><a href="/springsecurity/springsecurity-casserver.html" class="sidebar-link">配置 CAS-Server</a></li><li><a href="/springsecurity/springsecurity-cas-mysql.html" class="sidebar-link">CAS 对接数据库</a></li><li><a href="/springsecurity/cas-login-page.html" class="sidebar-link">CAS 自定义登录页面</a></li><li><a href="/springsecurity/swagger-springsecurity.html" class="sidebar-link">在 Swagger 请求头中携带 Token</a></li><li><a href="/springsecurity/cors-springsecurity.html" class="sidebar-link">三种跨域场景总结</a></li><li><a href="/springsecurity/http-springsecurity.html" class="sidebar-link">HTTP 认证</a></li><li><a href="/springsecurity/authorize-springsecurity.html" class="sidebar-link">四种权限控制方式</a></li><li><a href="/springsecurity/passwordencoder.html" class="sidebar-link">多种加密方案共存</a></li><li><a href="/springsecurity/objectpostprocess.html" class="sidebar-link">ObjectPostProcessor</a></li><li><a href="/springsecurity/httpsecurity-and.html" class="sidebar-link">配置中的 and</a></li><li><a href="/springsecurity/springsecurity-exception.html" class="sidebar-link">异常处理机制</a></li><li><a href="/springsecurity/spring-security-securitycontext.html" class="sidebar-link">SecurityContext</a></li><li><a href="/springsecurity/springsecurity-login.html" class="sidebar-link">登录流程分析</a></li><li><a href="/springsecurity/springsecurity-vue-token.html" class="sidebar-link">文件上传携带令牌</a></li><li><a href="/springsecurity/spring-security-update-info.html" class="sidebar-link">动态更新已登录用户信息</a></li><li><a href="/springsecurity/spring-security-json-2.html" class="sidebar-link">使用 JSON 格式登录</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/redis/" class="sidebar-heading clickable"><span>Redis</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/linux-redis.html" class="sidebar-link">Linux 上安装 Redis</a></li><li><a href="/redis/datatype.html" class="sidebar-link">Redis 中的五种数据类型简介</a></li><li><a href="/redis/string.html" class="sidebar-link">Redis 字符串 STRING 介绍</a></li><li><a href="/redis/string-bit.html" class="sidebar-link">BIT 相关命令</a></li><li><a href="/redis/list-set.html" class="sidebar-link">Redis 列表与集合</a></li><li><a href="/redis/hash-zset.html" class="sidebar-link">Redis 散列与有序集合</a></li><li><a href="/redis/pub-sub.html" class="sidebar-link">Redis 中的发布订阅和事务</a></li><li><a href="/redis/rdb.html" class="sidebar-link">Redis 快照持久化</a></li><li><a href="/redis/aof.html" class="sidebar-link">Redis 之 AOF 持久化</a></li><li><a href="/redis/master-slave-1.html" class="sidebar-link">Redis 主从复制(一)</a></li><li><a href="/redis/master-slave-2.html" class="sidebar-link">Redis 主从复制(二)</a></li><li><a href="/redis/cluster.html" class="sidebar-link">Redis 集群搭建</a></li><li><a href="/redis/jedis.html" class="sidebar-link">Jedis 使用</a></li><li><a href="/redis/springdata-redis.html" class="sidebar-link">Spring Data Redis 使用</a></li><li><a href="/redis/guide.html" class="sidebar-link">教程下载</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/docker/" class="sidebar-heading clickable"><span>Docker</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker/install.html" class="sidebar-link">入门及安装</a></li><li><a href="/docker/container-basic.html" class="sidebar-link">容器基本操作</a></li><li><a href="/docker/container-advanced.html" class="sidebar-link">容器高级操作</a></li><li><a href="/docker/images.html" class="sidebar-link">镜像基本操作</a></li><li><a href="/docker/dockerhub-newwork.html" class="sidebar-link">DockerHub 与容器网络</a></li><li><a href="/docker/data.html" class="sidebar-link">数据卷操作</a></li><li><a href="/docker/link.html" class="sidebar-link">容器连接</a></li><li><a href="/docker/container-arrangement.html" class="sidebar-link">容器编排入门</a></li><li><a href="/docker/mysql.html" class="sidebar-link">Docker 搭建 MySQL 主从复制</a></li><li><a href="/docker/download.html" class="sidebar-link">教程下载</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/mongodb/" class="sidebar-heading clickable"><span>MongoDB</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/mongodb/linux-install-mongodb.html" class="sidebar-link">Linux 上安装 MongoDB</a></li><li><a href="/mongodb/basic-operations.html" class="sidebar-link">基本操作</a></li><li><a href="/mongodb/data-types.html" class="sidebar-link">数据类型</a></li><li><a href="/mongodb/documents-update.html" class="sidebar-link">文档更新操作</a></li><li><a href="/mongodb/documents-query.html" class="sidebar-link">文档查询操作(一)</a></li><li><a href="/mongodb/documents-query-2.html" class="sidebar-link">文档查询操作(二)</a></li><li><a href="/mongodb/query-planner.html" class="sidebar-link">查看执行计划</a></li><li><a href="/mongodb/index-basic.html" class="sidebar-link">初识索引</a></li><li><a href="/mongodb/index-types.html" class="sidebar-link">各种类型的索引</a></li><li><a href="/mongodb/collections.html" class="sidebar-link">固定集合</a></li><li><a href="/mongodb/pipelines.html" class="sidebar-link">管道操作符(一)</a></li><li><a href="/mongodb/pipelines-2.html" class="sidebar-link">管道操作符(二)</a></li><li><a href="/mongodb/in-mapreduce.html" class="sidebar-link">MapReduce 使用</a></li><li><a href="/mongodb/replicaset-install.html" class="sidebar-link">副本集搭建</a></li><li><a href="/mongodb/replicaset-settings.html" class="sidebar-link">副本集配置</a></li><li><a href="/mongodb/replicaset-details.html" class="sidebar-link">副本集其他细节</a></li><li><a href="/mongodb/shard.html" class="sidebar-link">初识分片</a></li><li><a href="/mongodb/in-java.html" class="sidebar-link">Java 操作 MongoDB</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/mysql/" class="sidebar-heading clickable"><span>MySQL</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/mysql-read-write.html" class="sidebar-link">MySQL  读写分离环境搭建(一)</a></li><li><a href="/mysql/mysql-read-write-2.html" class="sidebar-link">MySQL  读写分离环境搭建(二)</a></li><li><a href="/mysql/mysql.html" class="sidebar-link">MySQL 只能做小项目？</a></li><li><a href="/mysql/mysql-sharding.html" class="sidebar-link">初识数据库切分</a></li><li><a href="/mysql/middleware.html" class="sidebar-link">What？Tomcat 竟然也算中间件？</a></li><li><a href="/mysql/mycat-install.html" class="sidebar-link">分布式数据库中间件 MyCat</a></li><li><a href="/mysql/mycat-rule.html" class="sidebar-link">数据库分片规则</a></li><li><a href="/mysql/mycat-id-autoincrement.html" class="sidebar-link">分布式数据库主键全局自增</a></li><li><a href="/mysql/mysql-high-performance.html" class="sidebar-link">给数据库减负的八个思路</a></li><li><a href="/mysql/mybatis-key-generated.html" class="sidebar-link">MyBatis 中主键回填</a></li><li><a href="/mysql/mybatis-@param.html" class="sidebar-link">MyBatis 中 @Param 注解使用场景</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/git/" class="sidebar-heading clickable"><span>Git</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/git/install.html" class="sidebar-link">Git 概述</a></li><li><a href="/git/basic.html" class="sidebar-link">Git 基本操作</a></li><li><a href="/git/delete.html" class="sidebar-link">Git 中的各种后悔药</a></li><li><a href="/git/branch.html" class="sidebar-link">Git 分支管理</a></li><li><a href="/git/remote.html" class="sidebar-link">Git 关联远程仓库</a></li><li><a href="/git/tag.html" class="sidebar-link">Git 标签管理</a></li><li><a href="/git/stash.html" class="sidebar-link">Git 工作区储藏</a></li><li><a href="/git/resources.html" class="sidebar-link">Git 学习资料</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>邮件发送其实是一个非常常见的需求，用户注册，找回密码等地方，都会用到，使用 JavaSE 代码发送邮件，步骤还是挺繁琐的，Spring Boot 中对于邮件发送，提供了相关的自动化配置类，使得邮件发送变得非常容易，本文我们就来一探究竟！看看使用 Spring Boot 发送邮件的 5 中姿势。</p> <h1 id="邮件基础"><a href="#邮件基础" class="header-anchor">#</a> 邮件基础</h1> <p>我们经常会听到各种各样的邮件协议，比如 SMTP、POP3、IMAP ，那么这些协议有什么作用，有什么区别？我们先来讨论一下这个问题。</p> <p>SMTP 是一个基于 TCP/IP 的应用层协议，江湖地位有点类似于 HTTP，SMTP 服务器默认监听的端口号为 25 。看到这里，小伙伴们可能会想到既然 SMTP 协议是基于 TCP/IP 的应用层协议，那么我是不是也可以通过 Socket 发送一封邮件呢？回答是肯定的。</p> <p>生活中我们投递一封邮件要经过如下几个步骤：</p> <ol><li>深圳的小王先将邮件投递到深圳的邮局</li> <li>深圳的邮局将邮件运送到上海的邮局</li> <li>上海的小张来邮局取邮件</li></ol> <p>这是一个缩减版的生活中邮件发送过程。这三个步骤可以分别对应我们的邮件发送过程，假设从 aaa@qq.com 发送邮件到 111@163.com ：</p> <ol><li>aaa@qq.com 先将邮件投递到腾讯的邮件服务器</li> <li>腾讯的邮件服务器将我们的邮件投递到网易的邮件服务器</li> <li>111@163.com 登录网易的邮件服务器查看邮件</li></ol> <p>邮件投递大致就是这个过程，这个过程就涉及到了多个协议，我们来分别看一下。</p> <p>SMTP 协议全称为 Simple Mail Transfer Protocol，译作简单邮件传输协议，它定义了邮件客户端软件与 SMTP 服务器之间，以及 SMTP 服务器与 SMTP 服务器之间的通信规则。</p> <p>也就是说 aaa@qq.com 用户先将邮件投递到腾讯的 SMTP 服务器这个过程就使用了 SMTP 协议，然后腾讯的 SMTP 服务器将邮件投递到网易的 SMTP 服务器这个过程也依然使用了 SMTP 协议，SMTP 服务器就是用来收邮件。</p> <p>而 POP3 协议全称为 Post Office Protocol ，译作邮局协议，它定义了邮件客户端与 POP3 服务器之间的通信规则，那么该协议在什么场景下会用到呢？当邮件到达网易的 SMTP 服务器之后， 111@163.com 用户需要登录服务器查看邮件，这个时候就该协议就用上了：邮件服务商都会为每一个用户提供专门的邮件存储空间，SMTP 服务器收到邮件之后，就将邮件保存到相应用户的邮件存储空间中，如果用户要读取邮件，就需要通过邮件服务商的 POP3 邮件服务器来完成。</p> <p>最后，可能也有小伙伴们听说过 IMAP 协议，这个协议是对 POP3 协议的扩展，功能更强，作用类似，这里不再赘述。</p> <h1 id="准备工作"><a href="#准备工作" class="header-anchor">#</a> 准备工作</h1> <p>目前国内大部分的邮件服务商都不允许直接使用用户名/密码的方式来在代码中发送邮件，都是要先申请授权码，这里以 QQ 邮箱为例，向大家演示授权码的申请流程：首先我们需要先登录 QQ 邮箱网页版，点击上方的设置按钮：</p> <p><img src="http://www.javaboy.org/images/boot2/43-1.jpg" alt="p266"></p> <p>然后点击账户选项卡：</p> <p><img src="http://www.javaboy.org/images/boot2/43-2.jpg" alt="p267"></p> <p>在账户选项卡中找到开启POP3/SMTP选项，如下：</p> <p><img src="http://www.javaboy.org/images/boot2/43-3.jpg" alt="p268"></p> <p>点击开启，开启相关功能，开启过程需要手机号码验证，按照步骤操作即可，不赘述。开启成功之后，即可获取一个授权码，将该号码保存好，一会使用。</p> <h1 id="项目创建"><a href="#项目创建" class="header-anchor">#</a> 项目创建</h1> <p>接下来，我们就可以创建项目了，Spring Boot 中，对于邮件发送提供了自动配置类，开发者只需要加入相关依赖，然后配置一下邮箱的基本信息，就可以发送邮件了。</p> <ul><li>首先创建一个 Spring Boot 项目，引入邮件发送依赖：</li></ul> <p><img src="http://www.javaboy.org/images/boot2/43-4.png" alt=""></p> <p>创建完成后，项目依赖如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-mail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>配置邮箱基本信息</li></ul> <p>项目创建成功后，接下来在 application.properties 中配置邮箱的基本信息：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">spring.mail.host</span><span class="token punctuation">=</span><span class="token attr-value">smtp.qq.com</span>
<span class="token attr-name">spring.mail.port</span><span class="token punctuation">=</span><span class="token attr-value">587</span>
<span class="token attr-name">spring.mail.username</span><span class="token punctuation">=</span><span class="token attr-value">1510161612@qq.com</span>
<span class="token attr-name">spring.mail.password</span><span class="token punctuation">=</span><span class="token attr-value">ubknfzhjkhrbbabe</span>
<span class="token attr-name">spring.mail.default-encoding</span><span class="token punctuation">=</span><span class="token attr-value">UTF-8</span>
<span class="token attr-name">spring.mail.properties.mail.smtp.socketFactoryClass</span><span class="token punctuation">=</span><span class="token attr-value">javax.net.ssl.SSLSocketFactory</span>
<span class="token attr-name">spring.mail.properties.mail.debug</span><span class="token punctuation">=</span><span class="token attr-value">true</span>
</code></pre></div><p>配置含义分别如下：</p> <ul><li>配置 SMTP 服务器地址</li> <li>SMTP 服务器的端口</li> <li>配置邮箱用户名</li> <li>配置密码，注意，不是真正的密码，而是刚刚申请到的授权码</li> <li>默认的邮件编码</li> <li>配饰 SSL 加密工厂</li> <li>表示开启 DEBUG 模式，这样，邮件发送过程的日志会在控制台打印出来，方便排查错误</li></ul> <p>如果不知道 smtp 服务器的端口或者地址的的话，可以参考 腾讯的邮箱文档</p> <ul><li>https://service.mail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=28&amp;&amp;no=371</li></ul> <p>做完这些之后，Spring Boot 就会自动帮我们配置好邮件发送类，相关的配置在 <code>org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration</code> 类中，部分源码如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConditionalOnClass</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">MimeMessage</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MimeType</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MailSender</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span><span class="token punctuation">(</span><span class="token class-name">MailSender</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Conditional</span><span class="token punctuation">(</span><span class="token class-name">MailSenderCondition</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableConfigurationProperties</span><span class="token punctuation">(</span><span class="token class-name">MailProperties</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Import</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token class-name">MailSenderJndiConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token class-name">MailSenderPropertiesConfiguration</span><span class="token punctuation">.</span><span class="token keyword">class</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MailSenderAutoConfiguration</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从这段代码中，可以看到，导入了另外一个配置 <code>MailSenderPropertiesConfiguration</code> 类，这个类中，提供了邮件发送相关的工具类：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;spring.mail&quot;</span><span class="token punctuation">,</span> name <span class="token operator">=</span> <span class="token string">&quot;host&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">class</span> <span class="token class-name">MailSenderPropertiesConfiguration</span> <span class="token punctuation">{</span>
        <span class="token keyword">private</span> <span class="token keyword">final</span> <span class="token class-name">MailProperties</span> properties<span class="token punctuation">;</span>
        <span class="token class-name">MailSenderPropertiesConfiguration</span><span class="token punctuation">(</span><span class="token class-name">MailProperties</span> properties<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>properties <span class="token operator">=</span> properties<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token annotation punctuation">@Bean</span>
        <span class="token annotation punctuation">@ConditionalOnMissingBean</span>
        <span class="token keyword">public</span> <span class="token class-name">JavaMailSenderImpl</span> <span class="token function">mailSender</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">JavaMailSenderImpl</span> sender <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JavaMailSenderImpl</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">applyProperties</span><span class="token punctuation">(</span>sender<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">return</span> sender<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到，这里创建了一个 <code>JavaMailSenderImpl</code> 的实例， <code>JavaMailSenderImpl</code> 是 <code>JavaMailSender</code> 的一个实现，我们将使用 <code>JavaMailSenderImpl</code> 来完成邮件的发送工作。</p> <p>做完如上两步，邮件发送的准备工作就算是完成了，接下来就可以直接发送邮件了。</p> <p>具体的发送，有 5 种不同的方式，我们一个一个来看。</p> <h2 id="发送简单邮件"><a href="#发送简单邮件" class="header-anchor">#</a> 发送简单邮件</h2> <p>简单邮件就是指邮件内容是一个普通的文本文档：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">JavaMailSender</span> javaMailSender<span class="token punctuation">;</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendSimpleMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SimpleMailMessage</span> message <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleMailMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;这是一封测试邮件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;1510161612@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;25xxxxx755@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span><span class="token function">setCc</span><span class="token punctuation">(</span><span class="token string">&quot;37xxxxx37@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span><span class="token function">setBcc</span><span class="token punctuation">(</span><span class="token string">&quot;14xxxxx098@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span><span class="token function">setSentDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    message<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;这是测试邮件的正文&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从上往下，代码含义分别如下：</p> <ol><li>构建一个邮件对象</li> <li>设置邮件主题</li> <li>设置邮件发送者</li> <li>设置邮件接收者，可以有多个接收者</li> <li>设置邮件抄送人，可以有多个抄送人</li> <li>设置隐秘抄送人，可以有多个</li> <li>设置邮件发送日期</li> <li>设置邮件的正文</li> <li>发送邮件</li></ol> <p>最后执行该方法，就可以实现邮件的发送，发送效果图如下：</p> <p><img src="http://www.javaboy.org/images/boot2/43-5.png" alt=""></p> <h2 id="发送带附件的邮件"><a href="#发送带附件的邮件" class="header-anchor">#</a> 发送带附件的邮件</h2> <p>邮件的附件可以是图片，也可以是普通文件，都是支持的。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendAttachFileMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessagingException</span> <span class="token punctuation">{</span>
    <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;这是一封测试邮件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;1510161612@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;25xxxxx755@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setCc</span><span class="token punctuation">(</span><span class="token string">&quot;37xxxxx37@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setBcc</span><span class="token punctuation">(</span><span class="token string">&quot;14xxxxx098@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSentDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;这是测试邮件的正文&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">addAttachment</span><span class="token punctuation">(</span><span class="token string">&quot;javaboy.jpg&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\sang\\Downloads\\javaboy.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>注意这里在构建邮件对象上和前文有所差异，这里是通过 javaMailSender 来获取一个复杂邮件对象，然后再利用 MimeMessageHelper 对邮件进行配置，MimeMessageHelper 是一个邮件配置的辅助工具类，创建时候的 true 表示构建一个 multipart message 类型的邮件，有了 MimeMessageHelper 之后，我们针对邮件的配置都是由 MimeMessageHelper 来代劳。</p> <p>最后通过 addAttachment 方法来添加一个附件。</p> <p>执行该方法，邮件发送效果图如下：</p> <p><img src="http://www.javaboy.org/images/boot2/43-6.png" alt=""></p> <h2 id="发送带图片资源的邮件"><a href="#发送带图片资源的邮件" class="header-anchor">#</a> 发送带图片资源的邮件</h2> <p>图片资源和附件有什么区别呢？图片资源是放在邮件正文中的，即一打开邮件，就能看到图片。但是一般来说，不建议使用这种方式，一些公司会对邮件内容的大小有限制（因为这种方式是将图片一起发送的）。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendImgResMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessagingException</span> <span class="token punctuation">{</span>
    <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;这是一封测试邮件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;1510161612@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;25xxxxx755@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setCc</span><span class="token punctuation">(</span><span class="token string">&quot;37xxxxx37@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setBcc</span><span class="token punctuation">(</span><span class="token string">&quot;14xxxxx098@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSentDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span><span class="token string">&quot;&lt;p&gt;hello 大家好，这是一封测试邮件，这封邮件包含两种图片，分别如下&lt;/p&gt;&lt;p&gt;第一张图片：&lt;/p&gt;&lt;img src='cid:p01'/&gt;&lt;p&gt;第二张图片：&lt;/p&gt;&lt;img src='cid:p02'/&gt;&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">addInline</span><span class="token punctuation">(</span><span class="token string">&quot;p01&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">FileSystemResource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\sang\\Downloads\\javaboy.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">addInline</span><span class="token punctuation">(</span><span class="token string">&quot;p02&quot;</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">FileSystemResource</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;C:\\Users\\sang\\Downloads\\javaboy2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这里的邮件 text 是一个 HTML 文本，里边涉及到的图片资源先用一个占位符占着，setText 方法的第二个参数 true 表示第一个参数是一个 HTML 文本。</p> <p>setText 之后，再通过 addInline 方法来添加图片资源。</p> <p>最后执行该方法，发送邮件，效果如下：</p> <p><img src="http://www.javaboy.org/images/boot2/43-7.png" alt=""></p> <p>在公司实际开发中，第一种和第三种都不是使用最多的邮件发送方案。因为正常来说，邮件的内容都是比较的丰富的，所以大部分邮件都是通过 HTML 来呈现的，如果直接拼接 HTML 字符串，这样以后不好维护，为了解决这个问题，一般邮件发送，都会有相应的邮件模板。最具代表性的两个模板就是 <code>Freemarker</code> 模板和 <code>Thyemeleaf</code> 模板了。</p> <h2 id="使用-freemarker-作邮件模板"><a href="#使用-freemarker-作邮件模板" class="header-anchor">#</a> 使用 Freemarker 作邮件模板</h2> <p>首先需要引入 Freemarker 依赖：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-freemarker<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后在 <code>resources/templates</code> 目录下创建一个 <code>mail.ftl</code> 作为邮件发送模板：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>hello 欢迎加入 xxx 大家庭，您的入职信息如下：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>姓名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>${username}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>工号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>${num}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>薪水<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>${salary}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> #ff1a0e</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>一起努力创造辉煌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>接下来，将邮件模板渲染成 HTML ，然后发送即可。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendFreemarkerMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessagingException</span><span class="token punctuation">,</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">TemplateException</span> <span class="token punctuation">{</span>
    <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;这是一封测试邮件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;1510161612@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;25xxxxx755@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setCc</span><span class="token punctuation">(</span><span class="token string">&quot;37xxxxx37@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setBcc</span><span class="token punctuation">(</span><span class="token string">&quot;14xxxxx098@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSentDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//构建 Freemarker 的基本配置</span>
    <span class="token class-name">Configuration</span> configuration <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Configuration</span><span class="token punctuation">(</span><span class="token class-name">Configuration</span><span class="token punctuation">.</span>VERSION_2_3_0<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 配置模板位置</span>
    <span class="token class-name">ClassLoader</span> loader <span class="token operator">=</span> <span class="token class-name">MailApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    configuration<span class="token punctuation">.</span><span class="token function">setClassLoaderForTemplateLoading</span><span class="token punctuation">(</span>loader<span class="token punctuation">,</span> <span class="token string">&quot;templates&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//加载模板</span>
    <span class="token class-name">Template</span> template <span class="token operator">=</span> configuration<span class="token punctuation">.</span><span class="token function">getTemplate</span><span class="token punctuation">(</span><span class="token string">&quot;mail.ftl&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setUsername</span><span class="token punctuation">(</span><span class="token string">&quot;javaboy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setNum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    user<span class="token punctuation">.</span><span class="token function">setSalary</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span> <span class="token number">99999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">StringWriter</span> out <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//模板渲染，渲染的结果将被保存到 out 中 ，将out 中的 html 字符串发送即可</span>
    template<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span>user<span class="token punctuation">,</span> out<span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>out<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>需要注意的是，虽然引入了 <code>Freemarker</code> 的自动化配置，但是我们在这里是直接 <code>new Configuration</code> 来重新配置 <code>Freemarker</code> 的，所以 Freemarker 默认的配置这里不生效，因此，在填写模板位置时，值为 <code>templates</code> 。</p> <p>调用该方法，发送邮件，效果图如下：</p> <p><img src="http://www.javaboy.org/images/boot2/43-8.png" alt=""></p> <h2 id="使用-thymeleaf-作邮件模板"><a href="#使用-thymeleaf-作邮件模板" class="header-anchor">#</a> 使用 Thymeleaf 作邮件模板</h2> <p>推荐在 Spring Boot 中使用 Thymeleaf 来构建邮件模板。因为 Thymeleaf 的自动化配置提供了一个 TemplateEngine，通过 TemplateEngine 可以方便的将 Thymeleaf 模板渲染为 HTML ，同时，Thymeleaf 的自动化配置在这里是继续有效的 。</p> <p>首先，引入 Thymeleaf 依赖：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>然后，创建 <code>Thymeleaf</code> 邮件模板：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">xmlns:</span>th</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://www.thymeleaf.org<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Title<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>hello 欢迎加入 xxx 大家庭，您的入职信息如下：<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>table</span> <span class="token attr-name">border</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>姓名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${username}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>工号<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${num}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span><span class="token punctuation">&gt;</span></span>薪水<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>${salary}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>table</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">color</span><span class="token punctuation">:</span> #ff1a0e</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>一起努力创造辉煌<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>接下来发送邮件：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Autowired</span>
<span class="token class-name">TemplateEngine</span> templateEngine<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendThymeleafMail</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">MessagingException</span> <span class="token punctuation">{</span>
    <span class="token class-name">MimeMessage</span> mimeMessage <span class="token operator">=</span> javaMailSender<span class="token punctuation">.</span><span class="token function">createMimeMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">MimeMessageHelper</span> helper <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MimeMessageHelper</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSubject</span><span class="token punctuation">(</span><span class="token string">&quot;这是一封测试邮件&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setFrom</span><span class="token punctuation">(</span><span class="token string">&quot;1510161612@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setTo</span><span class="token punctuation">(</span><span class="token string">&quot;25xxxxx755@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setCc</span><span class="token punctuation">(</span><span class="token string">&quot;37xxxxx37@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setBcc</span><span class="token punctuation">(</span><span class="token string">&quot;14xxxxx098@qq.com&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setSentDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Context</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Context</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;username&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;javaboy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;num&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;000001&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    context<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span><span class="token string">&quot;salary&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;99999&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> process <span class="token operator">=</span> templateEngine<span class="token punctuation">.</span><span class="token function">process</span><span class="token punctuation">(</span><span class="token string">&quot;mail.html&quot;</span><span class="token punctuation">,</span> context<span class="token punctuation">)</span><span class="token punctuation">;</span>
    helper<span class="token punctuation">.</span><span class="token function">setText</span><span class="token punctuation">(</span>process<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    javaMailSender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>mimeMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>调用该方法，发送邮件，效果图如下：</p> <p><img src="http://www.javaboy.org/images/boot2/43-8.png" alt=""></p> <p>好了，这就是我们今天说的 5 种邮件发送姿势，不知道你掌握了没有呢？</p> <p>本文案例已经上传到 GitHub：<a href="https://github.com/lenve/javaboy-code-samples" target="_blank" rel="noopener noreferrer">https://github.com/lenve/javaboy-code-samples<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>有问题欢迎留言讨论。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/springboot/jib.html" class="prev">
        使用 Jib 部署 Spring Boot
      </a></span> <span class="next"><a href="/springboot/springsession-bug.html">
        Spring Session 中的 Bug
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.93cfb041.js" defer></script><script src="/assets/js/2.afd40777.js" defer></script><script src="/assets/js/109.7e4e3e84.js" defer></script>
  </body>
</html>

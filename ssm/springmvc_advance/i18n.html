<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>国际化 | 江南一点雨</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="https://open.weixin.qq.com/qr/code?username=a_javaboy">
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.3f949b7f.css" as="style"><link rel="preload" href="/assets/js/app.93cfb041.js" as="script"><link rel="preload" href="/assets/js/2.afd40777.js" as="script"><link rel="preload" href="/assets/js/245.fdcca161.js" as="script"><link rel="prefetch" href="/assets/js/10.f65a90e2.js"><link rel="prefetch" href="/assets/js/100.3bcf32ff.js"><link rel="prefetch" href="/assets/js/101.bd9ebd49.js"><link rel="prefetch" href="/assets/js/102.392f968e.js"><link rel="prefetch" href="/assets/js/103.afadf5bf.js"><link rel="prefetch" href="/assets/js/104.c8312846.js"><link rel="prefetch" href="/assets/js/105.97a4170a.js"><link rel="prefetch" href="/assets/js/106.9f0ef153.js"><link rel="prefetch" href="/assets/js/107.bb303c1b.js"><link rel="prefetch" href="/assets/js/108.45e76aae.js"><link rel="prefetch" href="/assets/js/109.7e4e3e84.js"><link rel="prefetch" href="/assets/js/11.5e8094b3.js"><link rel="prefetch" href="/assets/js/110.839e4506.js"><link rel="prefetch" href="/assets/js/111.50cc5969.js"><link rel="prefetch" href="/assets/js/112.715e408b.js"><link rel="prefetch" href="/assets/js/113.aaba78f1.js"><link rel="prefetch" href="/assets/js/114.6a025439.js"><link rel="prefetch" href="/assets/js/115.8b36028e.js"><link rel="prefetch" href="/assets/js/116.2aa7851e.js"><link rel="prefetch" href="/assets/js/117.75ea5460.js"><link rel="prefetch" href="/assets/js/118.26bc5dca.js"><link rel="prefetch" href="/assets/js/119.0f7df258.js"><link rel="prefetch" href="/assets/js/12.4f05d2f8.js"><link rel="prefetch" href="/assets/js/120.f7b3a0ed.js"><link rel="prefetch" href="/assets/js/121.cf863463.js"><link rel="prefetch" href="/assets/js/122.fa3cfbdb.js"><link rel="prefetch" href="/assets/js/123.adc5157d.js"><link rel="prefetch" href="/assets/js/124.fbe6a3bf.js"><link rel="prefetch" href="/assets/js/125.d3e4c526.js"><link rel="prefetch" href="/assets/js/126.2667f20c.js"><link rel="prefetch" href="/assets/js/127.a992245e.js"><link rel="prefetch" href="/assets/js/128.e2dc5f84.js"><link rel="prefetch" href="/assets/js/129.276d62b1.js"><link rel="prefetch" href="/assets/js/13.6be298bf.js"><link rel="prefetch" href="/assets/js/130.df0fd4f2.js"><link rel="prefetch" href="/assets/js/131.e4e2b4dd.js"><link rel="prefetch" href="/assets/js/132.42ac2755.js"><link rel="prefetch" href="/assets/js/133.4d19914d.js"><link rel="prefetch" href="/assets/js/134.eee5f7f1.js"><link rel="prefetch" href="/assets/js/135.63554b27.js"><link rel="prefetch" href="/assets/js/136.a6bc1760.js"><link rel="prefetch" href="/assets/js/137.5fc69fd8.js"><link rel="prefetch" href="/assets/js/138.de23da83.js"><link rel="prefetch" href="/assets/js/139.a1faeb31.js"><link rel="prefetch" href="/assets/js/14.815db104.js"><link rel="prefetch" href="/assets/js/140.95dbf73f.js"><link rel="prefetch" href="/assets/js/141.b4542eae.js"><link rel="prefetch" href="/assets/js/142.f9296937.js"><link rel="prefetch" href="/assets/js/143.9ea81dee.js"><link rel="prefetch" href="/assets/js/144.a423b13c.js"><link rel="prefetch" href="/assets/js/145.7da590a6.js"><link rel="prefetch" href="/assets/js/146.bca8af1b.js"><link rel="prefetch" href="/assets/js/147.0aa847b1.js"><link rel="prefetch" href="/assets/js/148.8e722bc5.js"><link rel="prefetch" href="/assets/js/149.082e9ce8.js"><link rel="prefetch" href="/assets/js/15.f278054c.js"><link rel="prefetch" href="/assets/js/150.57c0d03e.js"><link rel="prefetch" href="/assets/js/151.bfeac464.js"><link rel="prefetch" href="/assets/js/152.1ed78952.js"><link rel="prefetch" href="/assets/js/153.51ae1560.js"><link rel="prefetch" href="/assets/js/154.a6f7351f.js"><link rel="prefetch" href="/assets/js/155.8cb2b9b7.js"><link rel="prefetch" href="/assets/js/156.baf79d5d.js"><link rel="prefetch" href="/assets/js/157.6dc937e3.js"><link rel="prefetch" href="/assets/js/158.f9688b9c.js"><link rel="prefetch" href="/assets/js/159.9c2d77a9.js"><link rel="prefetch" href="/assets/js/16.345bdcfc.js"><link rel="prefetch" href="/assets/js/160.c928cf3c.js"><link rel="prefetch" href="/assets/js/161.5d3727ba.js"><link rel="prefetch" href="/assets/js/162.bb1e7f33.js"><link rel="prefetch" href="/assets/js/163.049f7d18.js"><link rel="prefetch" href="/assets/js/164.a480bd3f.js"><link rel="prefetch" href="/assets/js/165.c8f91cd5.js"><link rel="prefetch" href="/assets/js/166.f0a0e356.js"><link rel="prefetch" href="/assets/js/167.54930ff6.js"><link rel="prefetch" href="/assets/js/168.2702d69f.js"><link rel="prefetch" href="/assets/js/169.44923723.js"><link rel="prefetch" href="/assets/js/17.a076d059.js"><link rel="prefetch" href="/assets/js/170.0e2e92d4.js"><link rel="prefetch" href="/assets/js/171.e63c9b1d.js"><link rel="prefetch" href="/assets/js/172.c18ef95a.js"><link rel="prefetch" href="/assets/js/173.a78b9057.js"><link rel="prefetch" href="/assets/js/174.35a568dc.js"><link rel="prefetch" href="/assets/js/175.aaff1ff2.js"><link rel="prefetch" href="/assets/js/176.10d8a2e2.js"><link rel="prefetch" href="/assets/js/177.83ea0cb0.js"><link rel="prefetch" href="/assets/js/178.3c9de5ed.js"><link rel="prefetch" href="/assets/js/179.28e6d588.js"><link rel="prefetch" href="/assets/js/18.542b7e9d.js"><link rel="prefetch" href="/assets/js/180.6c49aa48.js"><link rel="prefetch" href="/assets/js/181.5a053633.js"><link rel="prefetch" href="/assets/js/182.b23e7d08.js"><link rel="prefetch" href="/assets/js/183.ee09403b.js"><link rel="prefetch" href="/assets/js/184.94593e4b.js"><link rel="prefetch" href="/assets/js/185.ea14675f.js"><link rel="prefetch" href="/assets/js/186.105f44fd.js"><link rel="prefetch" href="/assets/js/187.13bdebf6.js"><link rel="prefetch" href="/assets/js/188.df5be68c.js"><link rel="prefetch" href="/assets/js/189.8feb4ee4.js"><link rel="prefetch" href="/assets/js/19.741384a0.js"><link rel="prefetch" href="/assets/js/190.8c35be02.js"><link rel="prefetch" href="/assets/js/191.9bbb2940.js"><link rel="prefetch" href="/assets/js/192.77be398f.js"><link rel="prefetch" href="/assets/js/193.401d4d9e.js"><link rel="prefetch" href="/assets/js/194.ce411ee2.js"><link rel="prefetch" href="/assets/js/195.10a07ccc.js"><link rel="prefetch" href="/assets/js/196.74cbc7e7.js"><link rel="prefetch" href="/assets/js/197.5d03c5b7.js"><link rel="prefetch" href="/assets/js/198.c298c39b.js"><link rel="prefetch" href="/assets/js/199.29ec26b9.js"><link rel="prefetch" href="/assets/js/20.4c668583.js"><link rel="prefetch" href="/assets/js/200.9b042f85.js"><link rel="prefetch" href="/assets/js/201.ce4fe568.js"><link rel="prefetch" href="/assets/js/202.97cae704.js"><link rel="prefetch" href="/assets/js/203.9f870d68.js"><link rel="prefetch" href="/assets/js/204.2796778b.js"><link rel="prefetch" href="/assets/js/205.8efe9247.js"><link rel="prefetch" href="/assets/js/206.ff06ce73.js"><link rel="prefetch" href="/assets/js/207.0402326b.js"><link rel="prefetch" href="/assets/js/208.2bd6489b.js"><link rel="prefetch" href="/assets/js/209.ca24b4e7.js"><link rel="prefetch" href="/assets/js/21.aebbbd15.js"><link rel="prefetch" href="/assets/js/210.4d61626d.js"><link rel="prefetch" href="/assets/js/211.6c198d71.js"><link rel="prefetch" href="/assets/js/212.52494de3.js"><link rel="prefetch" href="/assets/js/213.43f986d0.js"><link rel="prefetch" href="/assets/js/214.3403d0f9.js"><link rel="prefetch" href="/assets/js/215.ba7b6da8.js"><link rel="prefetch" href="/assets/js/216.ecbe6232.js"><link rel="prefetch" href="/assets/js/217.70deb9f1.js"><link rel="prefetch" href="/assets/js/218.de783ea7.js"><link rel="prefetch" href="/assets/js/219.4efc57bc.js"><link rel="prefetch" href="/assets/js/22.f361a824.js"><link rel="prefetch" href="/assets/js/220.5dc860c4.js"><link rel="prefetch" href="/assets/js/221.7a3c5614.js"><link rel="prefetch" href="/assets/js/222.b5a275ab.js"><link rel="prefetch" href="/assets/js/223.a8ea0f32.js"><link rel="prefetch" href="/assets/js/224.b2f5c374.js"><link rel="prefetch" href="/assets/js/225.0ab9bbe5.js"><link rel="prefetch" href="/assets/js/226.73ddbdc1.js"><link rel="prefetch" href="/assets/js/227.a8617bac.js"><link rel="prefetch" href="/assets/js/228.184e2034.js"><link rel="prefetch" href="/assets/js/229.a7efe08d.js"><link rel="prefetch" href="/assets/js/23.a04c99fe.js"><link rel="prefetch" href="/assets/js/230.49a88e1b.js"><link rel="prefetch" href="/assets/js/231.a422f33e.js"><link rel="prefetch" href="/assets/js/232.c323a194.js"><link rel="prefetch" href="/assets/js/233.5edbdef4.js"><link rel="prefetch" href="/assets/js/234.9f0a13bb.js"><link rel="prefetch" href="/assets/js/235.54a4fc37.js"><link rel="prefetch" href="/assets/js/236.d2d69ec5.js"><link rel="prefetch" href="/assets/js/237.64f6dcea.js"><link rel="prefetch" href="/assets/js/238.61c501f3.js"><link rel="prefetch" href="/assets/js/239.a33bb2dd.js"><link rel="prefetch" href="/assets/js/24.5bc3cf94.js"><link rel="prefetch" href="/assets/js/240.f7f4c0ba.js"><link rel="prefetch" href="/assets/js/241.65fc5fa2.js"><link rel="prefetch" href="/assets/js/242.0491824c.js"><link rel="prefetch" href="/assets/js/243.3f9577d5.js"><link rel="prefetch" href="/assets/js/244.9649ec6d.js"><link rel="prefetch" href="/assets/js/246.c83c6714.js"><link rel="prefetch" href="/assets/js/247.6677979b.js"><link rel="prefetch" href="/assets/js/248.97ea5089.js"><link rel="prefetch" href="/assets/js/249.d7170cdf.js"><link rel="prefetch" href="/assets/js/25.b67b3873.js"><link rel="prefetch" href="/assets/js/250.8adf3d86.js"><link rel="prefetch" href="/assets/js/251.86300af7.js"><link rel="prefetch" href="/assets/js/252.0e3ede05.js"><link rel="prefetch" href="/assets/js/253.586d912a.js"><link rel="prefetch" href="/assets/js/254.f521f0b4.js"><link rel="prefetch" href="/assets/js/255.0c8cdb1a.js"><link rel="prefetch" href="/assets/js/256.ec7f9c17.js"><link rel="prefetch" href="/assets/js/257.6dc36fca.js"><link rel="prefetch" href="/assets/js/258.9930d469.js"><link rel="prefetch" href="/assets/js/259.bdc389e2.js"><link rel="prefetch" href="/assets/js/26.d41155d3.js"><link rel="prefetch" href="/assets/js/260.7244b3ab.js"><link rel="prefetch" href="/assets/js/261.a0afac4b.js"><link rel="prefetch" href="/assets/js/262.431d6a82.js"><link rel="prefetch" href="/assets/js/263.c0899c3e.js"><link rel="prefetch" href="/assets/js/264.64a2a420.js"><link rel="prefetch" href="/assets/js/265.b0cad44b.js"><link rel="prefetch" href="/assets/js/266.21b77a2f.js"><link rel="prefetch" href="/assets/js/27.3c4a072d.js"><link rel="prefetch" href="/assets/js/28.4e74f69f.js"><link rel="prefetch" href="/assets/js/29.14f28039.js"><link rel="prefetch" href="/assets/js/3.2f237a9d.js"><link rel="prefetch" href="/assets/js/30.36410792.js"><link rel="prefetch" href="/assets/js/31.6ffd719e.js"><link rel="prefetch" href="/assets/js/32.bfd5c2e9.js"><link rel="prefetch" href="/assets/js/33.16929d80.js"><link rel="prefetch" href="/assets/js/34.361a9575.js"><link rel="prefetch" href="/assets/js/35.1c66b905.js"><link rel="prefetch" href="/assets/js/36.53256ba6.js"><link rel="prefetch" href="/assets/js/37.da2558ed.js"><link rel="prefetch" href="/assets/js/38.30d9e621.js"><link rel="prefetch" href="/assets/js/39.4818defd.js"><link rel="prefetch" href="/assets/js/4.7d5f245c.js"><link rel="prefetch" href="/assets/js/40.636eea27.js"><link rel="prefetch" href="/assets/js/41.0018ba6b.js"><link rel="prefetch" href="/assets/js/42.6ecc2862.js"><link rel="prefetch" href="/assets/js/43.58a75ee3.js"><link rel="prefetch" href="/assets/js/44.74a32a06.js"><link rel="prefetch" href="/assets/js/45.03250a20.js"><link rel="prefetch" href="/assets/js/46.52f68306.js"><link rel="prefetch" href="/assets/js/47.36e85e4f.js"><link rel="prefetch" href="/assets/js/48.49d57bca.js"><link rel="prefetch" href="/assets/js/49.b38b2ad5.js"><link rel="prefetch" href="/assets/js/5.d87988f8.js"><link rel="prefetch" href="/assets/js/50.56cc433e.js"><link rel="prefetch" href="/assets/js/51.c40a0825.js"><link rel="prefetch" href="/assets/js/52.63567257.js"><link rel="prefetch" href="/assets/js/53.3e42ed99.js"><link rel="prefetch" href="/assets/js/54.2761720e.js"><link rel="prefetch" href="/assets/js/55.4cb6db86.js"><link rel="prefetch" href="/assets/js/56.469a92f3.js"><link rel="prefetch" href="/assets/js/57.46afff20.js"><link rel="prefetch" href="/assets/js/58.7ef30381.js"><link rel="prefetch" href="/assets/js/59.744cb435.js"><link rel="prefetch" href="/assets/js/6.3a554393.js"><link rel="prefetch" href="/assets/js/60.094ab0a3.js"><link rel="prefetch" href="/assets/js/61.119e8b2e.js"><link rel="prefetch" href="/assets/js/62.565108d9.js"><link rel="prefetch" href="/assets/js/63.4c7edb02.js"><link rel="prefetch" href="/assets/js/64.54bb5e4b.js"><link rel="prefetch" href="/assets/js/65.42f707a8.js"><link rel="prefetch" href="/assets/js/66.c98dc6b7.js"><link rel="prefetch" href="/assets/js/67.ba6a3acd.js"><link rel="prefetch" href="/assets/js/68.a02a3b0b.js"><link rel="prefetch" href="/assets/js/69.cd233ec0.js"><link rel="prefetch" href="/assets/js/7.bab1dbf2.js"><link rel="prefetch" href="/assets/js/70.f1295eda.js"><link rel="prefetch" href="/assets/js/71.e1d95891.js"><link rel="prefetch" href="/assets/js/72.f5c3f64f.js"><link rel="prefetch" href="/assets/js/73.9d99f345.js"><link rel="prefetch" href="/assets/js/74.ad8f1d8c.js"><link rel="prefetch" href="/assets/js/75.c9fb45f8.js"><link rel="prefetch" href="/assets/js/76.b1d611d5.js"><link rel="prefetch" href="/assets/js/77.a04577e3.js"><link rel="prefetch" href="/assets/js/78.9ba11b90.js"><link rel="prefetch" href="/assets/js/79.420221c7.js"><link rel="prefetch" href="/assets/js/8.889a2b8d.js"><link rel="prefetch" href="/assets/js/80.9ec1d712.js"><link rel="prefetch" href="/assets/js/81.ecb47b58.js"><link rel="prefetch" href="/assets/js/82.778e423a.js"><link rel="prefetch" href="/assets/js/83.2b8384d4.js"><link rel="prefetch" href="/assets/js/84.cabc5b04.js"><link rel="prefetch" href="/assets/js/85.a094bd7c.js"><link rel="prefetch" href="/assets/js/86.cc9676aa.js"><link rel="prefetch" href="/assets/js/87.8a5e2ad5.js"><link rel="prefetch" href="/assets/js/88.35140b15.js"><link rel="prefetch" href="/assets/js/89.333e2b0b.js"><link rel="prefetch" href="/assets/js/9.b81dc625.js"><link rel="prefetch" href="/assets/js/90.2faba253.js"><link rel="prefetch" href="/assets/js/91.29ab2e40.js"><link rel="prefetch" href="/assets/js/92.8fa6f536.js"><link rel="prefetch" href="/assets/js/93.15279ab5.js"><link rel="prefetch" href="/assets/js/94.b576dde8.js"><link rel="prefetch" href="/assets/js/95.00c825c5.js"><link rel="prefetch" href="/assets/js/96.cb4857a8.js"><link rel="prefetch" href="/assets/js/97.7fd4177a.js"><link rel="prefetch" href="/assets/js/98.166528c5.js"><link rel="prefetch" href="/assets/js/99.4385d414.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3f949b7f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://open.weixin.qq.com/qr/code?username=a_javaboy" alt="江南一点雨" class="logo"> <span class="site-name can-hide">江南一点雨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="http://www.javaboy.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国际站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.itboyhub.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="http://www.javaboy.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国际站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="http://www.itboyhub.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  国内站
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><a href="/ssm/" class="sidebar-heading clickable router-link-active open"><span>SSM</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable router-link-active"><span>Maven</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable router-link-active"><span>Spring</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable router-link-active"><span>SpringMVC</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable router-link-active"><span>MyBatis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable router-link-active"><span>Spring 源码</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable router-link-active open"><span>SpringMVC 进阶</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/ssm/springmvc_advance/flashmap.html" class="sidebar-link">参数传递</a></li><li><a href="/ssm/springmvc_advance/pathpattern.html" class="sidebar-link">路径匹配符</a></li><li><a href="/ssm/springmvc_advance/responsebodyadvice_requestbodyadvice.html" class="sidebar-link">参数/响应预处理</a></li><li><a href="/ssm/springmvc_advance/springmvc_init.html" class="sidebar-link">SpringMVC初始化流程分析</a></li><li><a href="/ssm/springmvc_advance/argument_resolver.html" class="sidebar-link">自定义参数解析器</a></li><li><a href="/ssm/springmvc_advance/argument_resolver2.html" class="sidebar-link">深入参数解析器</a></li><li><a href="/ssm/springmvc_advance/handler_method_return_value_handler.html" class="sidebar-link">处理器返回值再加工</a></li><li><a href="/ssm/springmvc_advance/framework_servlet.html" class="sidebar-link">深入 FrameworkServlet</a></li><li><a href="/ssm/springmvc_advance/dispatcher_servlet.html" class="sidebar-link">深入 DispatcherServlet</a></li><li><a href="/ssm/springmvc_advance/handler_mapping.html" class="sidebar-link">深入 HandlerMapping</a></li><li><a href="/ssm/springmvc_advance/session_attribute.html" class="sidebar-link">SessionAttribute</a></li><li><a href="/ssm/springmvc_advance/handler_method.html" class="sidebar-link">深入 HandlerMethod</a></li><li><a href="/ssm/springmvc_advance/handler_adapter.html" class="sidebar-link">深入 HandlerAdapter</a></li><li><a href="/ssm/springmvc_advance/view_resolver.html" class="sidebar-link">深入 ViewResolver</a></li><li><a href="/ssm/springmvc_advance/default_view_name.html" class="sidebar-link">默认视图名</a></li><li><a href="/ssm/springmvc_advance/exception.html" class="sidebar-link">异常处理体系</a></li><li><a href="/ssm/springmvc_advance/servlet_3_0_fileupload.html" class="sidebar-link">Servlet3.0 文件上传</a></li><li><a href="/ssm/springmvc_advance/i18n.html" aria-current="page" class="active sidebar-link">国际化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_1-springmvc-国际化配置" class="sidebar-link">1.SpringMVC 国际化配置</a></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_2-spring-boot-国际化配置" class="sidebar-link">2.Spring Boot 国际化配置</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_2-1-基本使用" class="sidebar-link">2.1 基本使用</a></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_2-2-自定义切换" class="sidebar-link">2.2 自定义切换</a></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_2-3-其他自定义" class="sidebar-link">2.3 其他自定义</a></li></ul></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_3-localeresolver" class="sidebar-link">3.LocaleResolver</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_3-1-acceptheaderlocaleresolver" class="sidebar-link">3.1 AcceptHeaderLocaleResolver</a></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_3-2-sessionlocaleresolver" class="sidebar-link">3.2 SessionLocaleResolver</a></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_3-3-fixedlocaleresolver" class="sidebar-link">3.3 FixedLocaleResolver</a></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_3-4-cookielocaleresolver" class="sidebar-link">3.4 CookieLocaleResolver</a></li></ul></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_4-附录" class="sidebar-link">4.附录</a></li><li class="sidebar-sub-header"><a href="/ssm/springmvc_advance/i18n.html#_5-小结" class="sidebar-link">5.小结</a></li></ul></li><li><a href="/ssm/springmvc_advance/theme_resolver.html" class="sidebar-link">深入 ThemeResolver</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/ssm/" class="sidebar-heading clickable router-link-active"><span>WebFlux</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/springboot/" class="sidebar-heading clickable"><span>SpringBoot</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable open"><span>基本配置</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/springboot/java-ssm.html" class="sidebar-link">纯 Java 搭建 SSM 项目</a></li><li><a href="/springboot/create.html" class="sidebar-link">三种创建方法</a></li><li><a href="/springboot/parent.html" class="sidebar-link">理解项目中的 parent</a></li><li><a href="/springboot/application.properties.html" class="sidebar-link">理解 application.properties</a></li><li><a href="/springboot/yaml.html" class="sidebar-link">yaml 配置</a></li><li><a href="/springboot/starter.html" class="sidebar-link">自定义 starter</a></li><li><a href="/springboot/conditional.html" class="sidebar-link">理解自动化配置原理</a></li><li><a href="/springboot/https.html" class="sidebar-link">配置 Https</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>整合视图层</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>Web开发</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>数据持久化</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>整合 Redis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>RESTful</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>安全管理</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>其他</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/springboot/" class="sidebar-heading clickable"><span>面试题</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/oauth2/" class="sidebar-heading clickable"><span>OAuth2</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/oauth2/oauth2-info.html" class="sidebar-link">OAuth2 简介</a></li><li><a href="/oauth2/oauth2_authorization_code.html" class="sidebar-link">授权码模式</a></li><li><a href="/oauth2/oauth2-password-implicit.html" class="sidebar-link">四种认证模式</a></li><li><a href="/oauth2/oauth2-redis.html" class="sidebar-link">引入 Redis</a></li><li><a href="/oauth2/oauth2-jwt.html" class="sidebar-link">引入 JWT</a></li><li><a href="/oauth2/spring-cloud-oauth2.html" class="sidebar-link">微服务安全管理思路</a></li><li><a href="/oauth2/oauth2-sso.html" class="sidebar-link">单点登录</a></li><li><a href="/oauth2/github-oauth2.html" class="sidebar-link">接入 GitHub 第三方登录</a></li><li><a href="/oauth2/custom-token-info.html" class="sidebar-link">自定义返回的 Token 信息</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/springsecurity/" class="sidebar-heading clickable"><span>SpringSecurity</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/springsecurity/spring-security-guide.html" class="sidebar-link">Spring Security 简介</a></li><li><a href="/springsecurity/spring-security-form-login.html" class="sidebar-link">入门 Spring Security</a></li><li><a href="/springsecurity/spring-security-custom-formlogin.html" class="sidebar-link">定制表单登录</a></li><li><a href="/springsecurity/spring-security-json.html" class="sidebar-link">使用 JSON 交互</a></li><li><a href="/springsecurity/spring-security-authorization.html" class="sidebar-link">授权操作</a></li><li><a href="/springsecurity/spring-security-JdbcUserDetailsManager.html" class="sidebar-link">将用户数据存入数据库</a></li><li><a href="/springsecurity/springsecurity-springdatajpa.html" class="sidebar-link">Spring Data Jpa 做持久化</a></li><li><a href="/springsecurity/rememberme.html" class="sidebar-link">自动登录功能</a></li><li><a href="/springsecurity/rememberme-advance.html" class="sidebar-link">自动登录的安全风险</a></li><li><a href="/springsecurity/spring-security-vs-shiro.html" class="sidebar-link">Spring Security Vs Shiro</a></li><li><a href="/springsecurity/custom-authentication.html" class="sidebar-link">自定义认证逻辑(高级玩法)</a></li><li><a href="/springsecurity/details.html" class="sidebar-link">快速查看登录用户 IP</a></li><li><a href="/springsecurity/session-management.html" class="sidebar-link">自动踢掉前一个登录用户</a></li><li><a href="/springsecurity/springboot-vue-session-management.html" class="sidebar-link">Spring Boot + Vue 踢掉已登录用户</a></li><li><a href="/springsecurity/springsecurity-stricthttpfirewall.html" class="sidebar-link">HttpFirewall</a></li><li><a href="/springsecurity/springsecurity-sfa.html" class="sidebar-link">防御会话固定攻击</a></li><li><a href="/springsecurity/springsecurity-spring-session.html" class="sidebar-link">集群化环境处理 session 共享</a></li><li><a href="/springsecurity/springsecurity-csrf.html" class="sidebar-link">防御 CSRF 攻击</a></li><li><a href="/springsecurity/springsecurity-csrf-sourcecode.html" class="sidebar-link">CSRF 防御源码</a></li><li><a href="/springsecurity/springsecurity-passwordencoder.html" class="sidebar-link">密码加密的两种姿势</a></li><li><a href="/springsecurity/springsecurity-study.html" class="sidebar-link">Spring Security 要怎么学</a></li><li><a href="/springsecurity/springsecurity-ignoring.html" class="sidebar-link">两种资源放行策略</a></li><li><a href="/springsecurity/springsecurity-cas.html" class="sidebar-link">CAS 单点登录</a></li><li><a href="/springsecurity/springsecurity-casserver.html" class="sidebar-link">配置 CAS-Server</a></li><li><a href="/springsecurity/springsecurity-cas-mysql.html" class="sidebar-link">CAS 对接数据库</a></li><li><a href="/springsecurity/cas-login-page.html" class="sidebar-link">CAS 自定义登录页面</a></li><li><a href="/springsecurity/swagger-springsecurity.html" class="sidebar-link">在 Swagger 请求头中携带 Token</a></li><li><a href="/springsecurity/cors-springsecurity.html" class="sidebar-link">三种跨域场景总结</a></li><li><a href="/springsecurity/http-springsecurity.html" class="sidebar-link">HTTP 认证</a></li><li><a href="/springsecurity/authorize-springsecurity.html" class="sidebar-link">四种权限控制方式</a></li><li><a href="/springsecurity/passwordencoder.html" class="sidebar-link">多种加密方案共存</a></li><li><a href="/springsecurity/objectpostprocess.html" class="sidebar-link">ObjectPostProcessor</a></li><li><a href="/springsecurity/httpsecurity-and.html" class="sidebar-link">配置中的 and</a></li><li><a href="/springsecurity/springsecurity-exception.html" class="sidebar-link">异常处理机制</a></li><li><a href="/springsecurity/spring-security-securitycontext.html" class="sidebar-link">SecurityContext</a></li><li><a href="/springsecurity/springsecurity-login.html" class="sidebar-link">登录流程分析</a></li><li><a href="/springsecurity/springsecurity-vue-token.html" class="sidebar-link">文件上传携带令牌</a></li><li><a href="/springsecurity/spring-security-update-info.html" class="sidebar-link">动态更新已登录用户信息</a></li><li><a href="/springsecurity/spring-security-json-2.html" class="sidebar-link">使用 JSON 格式登录</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/redis/" class="sidebar-heading clickable"><span>Redis</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/redis/linux-redis.html" class="sidebar-link">Linux 上安装 Redis</a></li><li><a href="/redis/datatype.html" class="sidebar-link">Redis 中的五种数据类型简介</a></li><li><a href="/redis/string.html" class="sidebar-link">Redis 字符串 STRING 介绍</a></li><li><a href="/redis/string-bit.html" class="sidebar-link">BIT 相关命令</a></li><li><a href="/redis/list-set.html" class="sidebar-link">Redis 列表与集合</a></li><li><a href="/redis/hash-zset.html" class="sidebar-link">Redis 散列与有序集合</a></li><li><a href="/redis/pub-sub.html" class="sidebar-link">Redis 中的发布订阅和事务</a></li><li><a href="/redis/rdb.html" class="sidebar-link">Redis 快照持久化</a></li><li><a href="/redis/aof.html" class="sidebar-link">Redis 之 AOF 持久化</a></li><li><a href="/redis/master-slave-1.html" class="sidebar-link">Redis 主从复制(一)</a></li><li><a href="/redis/master-slave-2.html" class="sidebar-link">Redis 主从复制(二)</a></li><li><a href="/redis/cluster.html" class="sidebar-link">Redis 集群搭建</a></li><li><a href="/redis/jedis.html" class="sidebar-link">Jedis 使用</a></li><li><a href="/redis/springdata-redis.html" class="sidebar-link">Spring Data Redis 使用</a></li><li><a href="/redis/guide.html" class="sidebar-link">教程下载</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/docker/" class="sidebar-heading clickable"><span>Docker</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/docker/install.html" class="sidebar-link">入门及安装</a></li><li><a href="/docker/container-basic.html" class="sidebar-link">容器基本操作</a></li><li><a href="/docker/container-advanced.html" class="sidebar-link">容器高级操作</a></li><li><a href="/docker/images.html" class="sidebar-link">镜像基本操作</a></li><li><a href="/docker/dockerhub-newwork.html" class="sidebar-link">DockerHub 与容器网络</a></li><li><a href="/docker/data.html" class="sidebar-link">数据卷操作</a></li><li><a href="/docker/link.html" class="sidebar-link">容器连接</a></li><li><a href="/docker/container-arrangement.html" class="sidebar-link">容器编排入门</a></li><li><a href="/docker/mysql.html" class="sidebar-link">Docker 搭建 MySQL 主从复制</a></li><li><a href="/docker/download.html" class="sidebar-link">教程下载</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/mongodb/" class="sidebar-heading clickable"><span>MongoDB</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/mongodb/linux-install-mongodb.html" class="sidebar-link">Linux 上安装 MongoDB</a></li><li><a href="/mongodb/basic-operations.html" class="sidebar-link">基本操作</a></li><li><a href="/mongodb/data-types.html" class="sidebar-link">数据类型</a></li><li><a href="/mongodb/documents-update.html" class="sidebar-link">文档更新操作</a></li><li><a href="/mongodb/documents-query.html" class="sidebar-link">文档查询操作(一)</a></li><li><a href="/mongodb/documents-query-2.html" class="sidebar-link">文档查询操作(二)</a></li><li><a href="/mongodb/query-planner.html" class="sidebar-link">查看执行计划</a></li><li><a href="/mongodb/index-basic.html" class="sidebar-link">初识索引</a></li><li><a href="/mongodb/index-types.html" class="sidebar-link">各种类型的索引</a></li><li><a href="/mongodb/collections.html" class="sidebar-link">固定集合</a></li><li><a href="/mongodb/pipelines.html" class="sidebar-link">管道操作符(一)</a></li><li><a href="/mongodb/pipelines-2.html" class="sidebar-link">管道操作符(二)</a></li><li><a href="/mongodb/in-mapreduce.html" class="sidebar-link">MapReduce 使用</a></li><li><a href="/mongodb/replicaset-install.html" class="sidebar-link">副本集搭建</a></li><li><a href="/mongodb/replicaset-settings.html" class="sidebar-link">副本集配置</a></li><li><a href="/mongodb/replicaset-details.html" class="sidebar-link">副本集其他细节</a></li><li><a href="/mongodb/shard.html" class="sidebar-link">初识分片</a></li><li><a href="/mongodb/in-java.html" class="sidebar-link">Java 操作 MongoDB</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/mysql/" class="sidebar-heading clickable"><span>MySQL</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/mysql/mysql-read-write.html" class="sidebar-link">MySQL  读写分离环境搭建(一)</a></li><li><a href="/mysql/mysql-read-write-2.html" class="sidebar-link">MySQL  读写分离环境搭建(二)</a></li><li><a href="/mysql/mysql.html" class="sidebar-link">MySQL 只能做小项目？</a></li><li><a href="/mysql/mysql-sharding.html" class="sidebar-link">初识数据库切分</a></li><li><a href="/mysql/middleware.html" class="sidebar-link">What？Tomcat 竟然也算中间件？</a></li><li><a href="/mysql/mycat-install.html" class="sidebar-link">分布式数据库中间件 MyCat</a></li><li><a href="/mysql/mycat-rule.html" class="sidebar-link">数据库分片规则</a></li><li><a href="/mysql/mycat-id-autoincrement.html" class="sidebar-link">分布式数据库主键全局自增</a></li><li><a href="/mysql/mysql-high-performance.html" class="sidebar-link">给数据库减负的八个思路</a></li><li><a href="/mysql/mybatis-key-generated.html" class="sidebar-link">MyBatis 中主键回填</a></li><li><a href="/mysql/mybatis-@param.html" class="sidebar-link">MyBatis 中 @Param 注解使用场景</a></li></ul></section></li><li><section class="sidebar-group depth-0"><a href="/git/" class="sidebar-heading clickable"><span>Git</span> <!----></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/git/install.html" class="sidebar-link">Git 概述</a></li><li><a href="/git/basic.html" class="sidebar-link">Git 基本操作</a></li><li><a href="/git/delete.html" class="sidebar-link">Git 中的各种后悔药</a></li><li><a href="/git/branch.html" class="sidebar-link">Git 分支管理</a></li><li><a href="/git/remote.html" class="sidebar-link">Git 关联远程仓库</a></li><li><a href="/git/tag.html" class="sidebar-link">Git 标签管理</a></li><li><a href="/git/stash.html" class="sidebar-link">Git 工作区储藏</a></li><li><a href="/git/resources.html" class="sidebar-link">Git 学习资料</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>松哥之前写过 Spring Boot 国际化的问题，不过那一次没讲源码，这次咱们整点源码来深入理解下这个问题。</p> <p>国际化，也叫 i18n，为啥叫这个名字呢？因为国际化英文是 internationalization ，在 i 和 n 之间有 18 个字母，所以叫 i18n。我们的应用如果做了国际化就可以在不同的语言环境下，方便的进行切换，最常见的就是中文和英文之间的切换，国际化这个功能也是相当的常见。</p> <h2 id="_1-springmvc-国际化配置"><a href="#_1-springmvc-国际化配置" class="header-anchor">#</a> 1.SpringMVC 国际化配置</h2> <p>还是先来说说用法，再来说源码，这样大家不容易犯迷糊。我们先说在 SSM 中如何处理国际化问题。</p> <p>首先国际化我们可能有两种需求：</p> <ul><li>在页面渲染时实现国际化（这个借助于 Spring 标签实现）</li> <li>在接口中获取国际化匹配后的消息</li></ul> <p>大致上就是上面这两种场景。接下来松哥通过一个简单的用法来和大家演示下具体玩法。</p> <p>首先我们在项目的 resources 目录下新建语言文件，language_en_US.properties 和 language_zh-CN.properties，如下图：</p> <p><img src="http://img.itboyhub.com/2021/02/20210401204229.png" alt=""></p> <p>内容分别如下：</p> <p>language_en_US.properties：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">login.username</span><span class="token punctuation">=</span><span class="token attr-value">Username</span>
<span class="token attr-name">login.password</span><span class="token punctuation">=</span><span class="token attr-value">Password</span>
</code></pre></div><p>language_zh-CN.properties：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">login.username</span><span class="token punctuation">=</span><span class="token attr-value">用户名</span>
<span class="token attr-name">login.password</span><span class="token punctuation">=</span><span class="token attr-value">用户密码</span>
</code></pre></div><p>这两个分别对应英中文环境。配置文件写好之后，还需要在 SpringMVC 容器中提供一个 ResourceBundleMessageSource 实例去加载这两个实例，如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.springframework.context.support.ResourceBundleMessageSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>messageSource<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>basename<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>language<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>defaultEncoding<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>这里配置了文件名 language 和默认的编码格式。</p> <p>接下来我们新建一个 login.jsp 文件，如下：</p> <div class="language-jsp extra-class"><pre class="language-text"><code>&lt;%@ taglib prefix=&quot;spring&quot; uri=&quot;http://www.springframework.org/tags&quot; %&gt;
&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Title&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;spring:message code=&quot;login.username&quot;/&gt; &lt;input type=&quot;text&quot;&gt; &lt;br&gt;
&lt;spring:message code=&quot;login.password&quot;/&gt; &lt;input type=&quot;text&quot;&gt; &lt;br&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre></div><p>在这个文件中，我们通过 <code>spring:message</code> 标签来引用变量，该标签会根据当前的实际情况，选择合适的语言文件。</p> <p>接下来我们为 login.jsp 提供一个控制器：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">MessageSource</span> messageSource<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;login.username&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;login.password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;username = &quot;</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;password = &quot;</span> <span class="token operator">+</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>控制器中直接返回 login 视图即可。</p> <p>另外我这还注入了 MessageSource 对象，主要是为了向大家展示如何在处理器中获取国际化后的语言文字。</p> <p>配置完成后，启动项目进行测试。</p> <p>默认情况下，系统是根据请求头的中 Accept-Language 字段来判断当前的语言环境的，该这个字段由浏览器自动发送，我们这里为了测试方便，可以使用 POSTMAN 进行测试，然后手动设置 Accept_Language 字段。</p> <p>首先测试中文环境：</p> <p><img src="http://img.itboyhub.com/2021/02/20210401205538.png" alt=""></p> <p>然后测试英文环境：</p> <p><img src="http://img.itboyhub.com/2021/02/20210401205612.png" alt=""></p> <p>都没问题，完美！同时观察 IDEA 控制台，也能正确打印出语言文字。</p> <p>上面这个是基于 AcceptHeaderLocaleResolver 来解析出当前的区域和语言的。</p> <p>有的时候，我们希望语言环境直接通过请求参数来传递，而不是通过请求头来传递，这个需求我们通过 SessionLocaleResolver 或者 CookieLocaleResolver 都可以实现。</p> <p>先来看 SessionLocaleResolver。</p> <p>首先在 SpringMVC 配置文件中提供 SessionLocaleResolver 的实例，同时配置一个拦截器，如下：</p> <div class="language-xml extra-class"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">mvc:</span>mapping</span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>/**<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.LocaleChangeInterceptor<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>paramName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>locale<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptor</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">mvc:</span>interceptors</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>org.springframework.web.servlet.i18n.SessionLocaleResolver<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>localeResolver<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>SessionLocaleResolver 是负责区域解析的，这个没啥好说的。拦截器 LocaleChangeInterceptor 则主要是负责参数解析的，我们在配置拦截器的时候，设置了参数名为 locale（默认即此），也就是说我们将来可以通过 locale 参数来传递当前的环境信息。</p> <p>配置完成后，我们还是来访问刚才的 login 控制器，如下：</p> <p><img src="http://img.itboyhub.com/2021/02/20210401210442.png" alt=""></p> <p>此时我们可以直接通过 locale 参数来控制当前的语言环境，这个 locale 参数就是在前面所配置的 LocaleChangeInterceptor 拦截器中被自动解析的。</p> <p>如果你不想配置 LocaleChangeInterceptor 拦截器也是可以的，直接自己手动解析 locale 参数然后设置 locale 也行，像下面这样：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">MessageSource</span> messageSource<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token class-name">String</span> locale<span class="token punctuation">,</span><span class="token class-name">HttpSession</span> session<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">SessionLocaleResolver</span><span class="token punctuation">.</span>LOCALE_SESSION_ATTRIBUTE_NAME<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;zh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;en-US&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            session<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token class-name">SessionLocaleResolver</span><span class="token punctuation">.</span>LOCALE_SESSION_ATTRIBUTE_NAME<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;US&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">String</span> username <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;login.username&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> password <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;login.password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;username = &quot;</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;password = &quot;</span> <span class="token operator">+</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>SessionLocaleResolver 所实现的功能也可以通过 CookieLocaleResolver 来实现，不同的是前者将解析出来的区域信息保存在 session 中，而后者则保存在 Cookie 中。<strong>保存在 session 中，只要 session 没有发生变化，后续就不用再次传递区域语言参数了，保存在 Cookie 中，只要 Cookie 没变，后续也不用再次传递区域语言参数了</strong>。</p> <p>使用 CookieLocaleResolver 的方式很简单，直接在 SpringMVC 中提供 CookieLocaleResolver 的实例即可，如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">&lt;</span>bean <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;org.springframework.web.servlet.i18n.CookieLocaleResolver&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;localeResolver&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>注意这里也需要使用到 LocaleChangeInterceptor 拦截器，如果不使用该拦截器，则需要自己手动解析并配置语言环境，手动解析并配置的方式如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/login3&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">login3</span><span class="token punctuation">(</span><span class="token class-name">String</span> locale<span class="token punctuation">,</span> <span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">CookieLocaleResolver</span> resolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CookieLocaleResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;zh-CN&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        resolver<span class="token punctuation">.</span><span class="token function">setLocale</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;zh&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;CN&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">&quot;en-US&quot;</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        resolver<span class="token punctuation">.</span><span class="token function">setLocale</span><span class="token punctuation">(</span>req<span class="token punctuation">,</span> resp<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Locale</span><span class="token punctuation">(</span><span class="token string">&quot;en&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;US&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">String</span> username <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;login.username&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> password <span class="token operator">=</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;login.password&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;username = &quot;</span> <span class="token operator">+</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;password = &quot;</span> <span class="token operator">+</span> password<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token string">&quot;login&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>配置完成后，启动项目进行测试，这次测试的方式跟 SessionLocaleResolver 的测试方式一致，松哥就不再多说了。</p> <p>除了前面介绍的这几种 LocaleResolver 之外，还有一个 FixedLocaleResolver，因为比较少见，松哥这里就不做过多介绍了。</p> <h2 id="_2-spring-boot-国际化配置"><a href="#_2-spring-boot-国际化配置" class="header-anchor">#</a> 2.Spring Boot 国际化配置</h2> <h3 id="_2-1-基本使用"><a href="#_2-1-基本使用" class="header-anchor">#</a> 2.1 基本使用</h3> <p>Spring Boot 和 Spring 一脉相承，对于国际化的支持，默认是通过 AcceptHeaderLocaleResolver 解析器来完成的，这个解析器，默认是通过请求头的 Accept-Language 字段来判断当前请求所属的环境的，进而给出合适的响应。</p> <p>所以在 Spring Boot 中做国际化，这一块我们可以不用配置，直接就开搞。</p> <p>首先创建一个普通的 Spring Boot 项目，添加 web 依赖即可。项目创建成功后，默认的国际化配置文件放在 resources 目录下，所以我们直接在该目录下创建四个测试文件，如下：</p> <p><img src="http://img.itboyhub.com/2020/03/i18n-1.png" alt=""></p> <ul><li>我们的 message 文件是直接创建在 resources 目录下的，IDEA 在展示的时候，会多出一个 Resource Bundle，这个大家不用管，千万别手动去创建这个目录。</li> <li>messages.properties 这个是默认的配置，其他的则是不同语言环境下的配置，en_US 是英语(美国)，zh_CN 是中文简体，zh_TW 是中文繁体（文末附录里边有一个完整的语言简称表格）。</li></ul> <p>四个文件创建好之后，第一个默认的我们可以先空着，另外三个分别填入以下内容：</p> <p>messages_zh_CN.properties</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">user.name</span><span class="token punctuation">=</span><span class="token attr-value">江南一点雨</span>
</code></pre></div><p>messages_zh_TW.properties</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">user.name</span><span class="token punctuation">=</span><span class="token attr-value">江南壹點雨</span>
</code></pre></div><p>messages_en_US.properties</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">user.name</span><span class="token punctuation">=</span><span class="token attr-value">javaboy</span>
</code></pre></div><p>配置完成后，我们就可以直接开始使用了。在需要使用值的地方，直接注入 MessageSource 实例即可。</p> <blockquote><p>在 Spring 中需要配置的 MessageSource 现在不用配置了，Spring Boot 会通过 <code>org.springframework.boot.autoconfigure.context.MessageSourceAutoConfiguration</code> 自动帮我们配置一个 MessageSource 实例。</p></blockquote> <p>创建一个 HelloController ，内容如下：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token class-name">MessageSource</span> messageSource<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> messageSource<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token string">&quot;user.name&quot;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">LocaleContextHolder</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 HelloController 中我们可以直接注入 MessageSource 实例，然后调用该实例中的 getMessage 方法去获取变量的值，第一个参数是要获取变量的 key，第二个参数是如果 value 中有占位符，可以从这里传递参数进去，第三个参数传递一个 Locale 实例即可，这相当于当前的语言环境。</p> <p>接下来我们就可以直接去调用这个接口了。</p> <p>默认情况下，在接口调用时，通过请求头的 Accept-Language 来配置当前的环境，我这里通过 POSTMAN 来进行测试，结果如下：</p> <p><img src="http://img.itboyhub.com/2020/03/i18n-2.png" alt=""></p> <p>小伙伴们看到，我在请求头中设置了 Accept-Language 为 zh-CN，所以拿到的就是简体中文；如果我设置了 zh-TW，就会拿到繁体中文：</p> <p><img src="http://img.itboyhub.com/2020/03/i18n-3.png" alt=""></p> <p>是不是很 Easy？</p> <h3 id="_2-2-自定义切换"><a href="#_2-2-自定义切换" class="header-anchor">#</a> 2.2 自定义切换</h3> <p>有的小伙伴觉得切换参数放在请求头里边好像不太方便，那么也可以自定义解析方式。例如参数可以当成普通参数放在地址栏上，通过如下配置可以实现我们的需求。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebConfig</span> <span class="token keyword">implements</span> <span class="token class-name">WebMvcConfigurer</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addInterceptors</span><span class="token punctuation">(</span><span class="token class-name">InterceptorRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">LocaleChangeInterceptor</span> interceptor <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LocaleChangeInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        interceptor<span class="token punctuation">.</span><span class="token function">setParamName</span><span class="token punctuation">(</span><span class="token string">&quot;lang&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        registry<span class="token punctuation">.</span><span class="token function">addInterceptor</span><span class="token punctuation">(</span>interceptor<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token class-name">LocaleResolver</span> <span class="token function">localeResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SessionLocaleResolver</span> localeResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SessionLocaleResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        localeResolver<span class="token punctuation">.</span><span class="token function">setDefaultLocale</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span>SIMPLIFIED_CHINESE<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> localeResolver<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这段配置中，我们首先提供了一个 SessionLocaleResolver 实例，这个实例会替换掉默认的 AcceptHeaderLocaleResolver，不同于 AcceptHeaderLocaleResolver 通过请求头来判断当前的环境信息，SessionLocaleResolver 将客户端的 Locale 保存到 HttpSession 对象中，并且可以进行修改（这意味着当前环境信息，前端给浏览器发送一次即可记住，只要 session 有效，浏览器就不必再次告诉服务端当前的环境信息）。</p> <p>另外我们还配置了一个拦截器，这个拦截器会拦截请求中 key 为 lang 的参数（不配置的话是 locale），这个参数则指定了当前的环境信息。</p> <p>好了，配置完成后，启动项目，访问方式如下：</p> <p><img src="http://img.itboyhub.com/2020/03/i18n-4.png?aa=123" alt=""></p> <p>我们通过在请求中添加 lang 来指定当前环境信息。这个指定只需要一次即可，也就是说，在 session 不变的情况下，下次请求可以不必带上 lang 参数，服务端已经知道当前的环境信息了。</p> <p>CookieLocaleResolver 也是类似用法，不再赘述。</p> <h3 id="_2-3-其他自定义"><a href="#_2-3-其他自定义" class="header-anchor">#</a> 2.3 其他自定义</h3> <p>默认情况下，我们的配置文件放在 resources 目录下，如果大家想自定义，也是可以的，例如定义在 resources/i18n 目录下：</p> <p><img src="http://img.itboyhub.com/2020/03/i18n-5.png" alt=""></p> <p>但是这种定义方式系统就不知道去哪里加载配置文件了，此时还需要 application.properties 中进行额外配置(注意这是一个相对路径)：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">spring.messages.basename</span><span class="token punctuation">=</span><span class="token attr-value">i18n/messages</span>
</code></pre></div><p>另外还有一些编码格式的配置等，内容如下：</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">spring.messages.cache-duration</span><span class="token punctuation">=</span><span class="token attr-value">3600</span>
<span class="token attr-name">spring.messages.encoding</span><span class="token punctuation">=</span><span class="token attr-value">UTF-8</span>
<span class="token attr-name">spring.messages.fallback-to-system-locale</span><span class="token punctuation">=</span><span class="token attr-value">true</span>
</code></pre></div><p>spring.messages.cache-duration 表示 messages 文件的缓存失效时间，如果不配置则缓存一直有效。</p> <p>spring.messages.fallback-to-system-locale 属性则略显神奇，网上竟然看不到一个明确的答案，后来翻了一会源码才看出端倪。</p> <p>这个属性的作用在 <code>org.springframework.context.support.AbstractResourceBasedMessageSource#getDefaultLocale</code> 方法中生效：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">protected</span> <span class="token class-name">Locale</span> <span class="token function">getDefaultLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>defaultLocale <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultLocale<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>fallbackToSystemLocale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从这段代码可以看出，在找不到当前系统对应的资源文件时，如果该属性为 true，则会默认查找当前系统对应的资源文件，否则就返回 null，返回 null 之后，最终又会调用到系统默认的 messages.properties 文件。</p> <h2 id="_3-localeresolver"><a href="#_3-localeresolver" class="header-anchor">#</a> 3.LocaleResolver</h2> <p>国际化这块主要涉及到的组件是 LocaleResolver，这是一个开放的接口，官方默认提供了四个实现。当前该使用什么环境，主要是通过 LocaleResolver 来进行解析的。</p> <p><strong>LocaleResolver</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">LocaleResolver</span> <span class="token punctuation">{</span>
	<span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">void</span> <span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><p>这里两个方法：</p> <ol><li>resolveLocale：根据当前请求解析器出 Locale 对象。</li> <li>设置 Locale 对象。</li></ol> <p>我们来看看 LocaleResolver 的继承关系：</p> <p><img src="http://img.itboyhub.com/2021/02/20210401223028.png" alt=""></p> <p>虽然中间有几个抽象类，不过最终负责实现的其实就四个：</p> <ul><li>AcceptHeaderLocaleResolver：根据请求头中的 Accept-Language 字段来确定当前的区域语言等。</li> <li>SessionLocaleResolver：根据请求参数来确定区域语言等，确定后会保存在 Session 中，只要 Session 不变，Locale 对象就一直有效。</li> <li>CookieLocaleResolver：根据请求参数来确定区域语言等，确定后会保存在 Cookie 中，只要 Session 不变，Locale 对象就一直有效。</li> <li>FixedLocaleResolver：配置时直接提供一个 Locale 对象，以后不能修改。</li></ul> <p>接下来我们就对这几个类逐一进行分析。</p> <h3 id="_3-1-acceptheaderlocaleresolver"><a href="#_3-1-acceptheaderlocaleresolver" class="header-anchor">#</a> 3.1 AcceptHeaderLocaleResolver</h3> <p>AcceptHeaderLocaleResolver 直接实现了 LocaleResolver 接口，我们来看它的 resolveLocale 方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Locale</span> defaultLocale <span class="token operator">=</span> <span class="token function">getDefaultLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>defaultLocale <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> request<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Accept-Language&quot;</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> defaultLocale<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">Locale</span> requestLocale <span class="token operator">=</span> request<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Locale</span><span class="token punctuation">&gt;</span></span> supportedLocales <span class="token operator">=</span> <span class="token function">getSupportedLocales</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>supportedLocales<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> supportedLocales<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>requestLocale<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> requestLocale<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">Locale</span> supportedLocale <span class="token operator">=</span> <span class="token function">findSupportedLocale</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> supportedLocales<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>supportedLocale <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> supportedLocale<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span>defaultLocale <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> defaultLocale <span class="token operator">:</span> requestLocale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ol><li>首先去获取默认的 Locale 对象。</li> <li>如果存在默认的 Locale 对象，并且请求头中没有设置 <code>Accept-Language</code> 字段，则直接返回默认的 Locale。</li> <li>从 request 中取出当前的 Locale 对象，然后查询出支持的 supportedLocales，如果 supportedLocales 或者 supportedLocales 中包含 requestLocale，则直接返回 requestLocale。</li> <li>如果前面还是没有匹配成功的，则从 request 中取出 locales 集合，然后再去和支持的 locale 进行比对，选择匹配成功的 locale 返回。</li> <li>如果前面都没能返回，则判断 defaultLocale 是否为空，如果不为空，就返回 defaultLocale，否则返回 defaultLocale。</li></ol> <p>再来看看它的 setLocale 方法，直接抛出异常，意味着通过请求头处理 Locale 是不允许修改的。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span>
			<span class="token string">&quot;Cannot change HTTP accept header - use a different locale resolution strategy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2-sessionlocaleresolver"><a href="#_3-2-sessionlocaleresolver" class="header-anchor">#</a> 3.2 SessionLocaleResolver</h3> <p>SessionLocaleResolver 的实现多了一个抽象类 AbstractLocaleContextResolver，AbstractLocaleContextResolver 中增加了对 TimeZone 的支持，我们先来看下 AbstractLocaleContextResolver：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">AbstractLocaleContextResolver</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractLocaleResolver</span> <span class="token keyword">implements</span> <span class="token class-name">LocaleContextResolver</span> <span class="token punctuation">{</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token keyword">private</span> <span class="token class-name">TimeZone</span> defaultTimeZone<span class="token punctuation">;</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setDefaultTimeZone</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Nullable</span> <span class="token class-name">TimeZone</span> defaultTimeZone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>defaultTimeZone <span class="token operator">=</span> defaultTimeZone<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Nullable</span>
	<span class="token keyword">public</span> <span class="token class-name">TimeZone</span> <span class="token function">getDefaultTimeZone</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>defaultTimeZone<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token function">resolveLocaleContext</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>locale <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> locale <span class="token operator">:</span> request<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">setLocaleContext</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> <span class="token punctuation">(</span>locale <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> <span class="token keyword">new</span> <span class="token class-name">SimpleLocaleContext</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>可以看到，多了一个 TimeZone 属性。从请求中解析出 Locale 还是调用了 resolveLocaleContext 方法，该方法在子类中被实现，另外调用 setLocaleContext 方法设置 Locale，该方法的实现也在子类中。</p> <p>我们来看下它的子类 SessionLocaleResolver：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">)</span> <span class="token class-name">WebUtils</span><span class="token punctuation">.</span><span class="token function">getSessionAttribute</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>localeAttributeName<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>locale <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		locale <span class="token operator">=</span> <span class="token function">determineDefaultLocale</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> locale<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>直接从 Session 中获取 Locale，默认的属性名是 <code>SessionLocaleResolver.class.getName() + &quot;.LOCALE&quot;</code>，如果 session 中不存在 Locale 信息，则调用 determineDefaultLocale 方法去加载 Locale，该方法会首先找到 defaultLocale，如果 defaultLocale 不为 null 就直接返回，否则就从 request 中获取 Locale 返回。</p> <p>再来看 setLocaleContext 方法，就是将解析出来的 Locale 保存起来。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocaleContext</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
		<span class="token annotation punctuation">@Nullable</span> <span class="token class-name">LocaleContext</span> localeContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token class-name">TimeZone</span> timeZone <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>localeContext <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		locale <span class="token operator">=</span> localeContext<span class="token punctuation">.</span><span class="token function">getLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>localeContext <span class="token keyword">instanceof</span> <span class="token class-name">TimeZoneAwareLocaleContext</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			timeZone <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">TimeZoneAwareLocaleContext</span><span class="token punctuation">)</span> localeContext<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimeZone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token class-name">WebUtils</span><span class="token punctuation">.</span><span class="token function">setSessionAttribute</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>localeAttributeName<span class="token punctuation">,</span> locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token class-name">WebUtils</span><span class="token punctuation">.</span><span class="token function">setSessionAttribute</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>timeZoneAttributeName<span class="token punctuation">,</span> timeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>保存到 Session 中即可。大家可以看到，这种保存方式其实和我们前面演示的自己保存代码基本一致，殊途同归。</p> <h3 id="_3-3-fixedlocaleresolver"><a href="#_3-3-fixedlocaleresolver" class="header-anchor">#</a> 3.3 FixedLocaleResolver</h3> <p>FixedLocaleResolver 有三个构造方法，无论调用哪一个，都会配置默认的 Locale：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">FixedLocaleResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setDefaultLocale</span><span class="token punctuation">(</span><span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">FixedLocaleResolver</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setDefaultLocale</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token class-name">FixedLocaleResolver</span><span class="token punctuation">(</span><span class="token class-name">Locale</span> locale<span class="token punctuation">,</span> <span class="token class-name">TimeZone</span> timeZone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">setDefaultLocale</span><span class="token punctuation">(</span>locale<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">setDefaultTimeZone</span><span class="token punctuation">(</span>timeZone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>要么自己传 Locale 进来，要么调用 Locale.getDefault() 方法获取默认的 Locale。</p> <p>再来看 resolveLocale 方法：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token class-name">Locale</span> <span class="token function">resolveLocale</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">Locale</span> locale <span class="token operator">=</span> <span class="token function">getDefaultLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>locale <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		locale <span class="token operator">=</span> <span class="token class-name">Locale</span><span class="token punctuation">.</span><span class="token function">getDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> locale<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个应该就不用解释了吧。</p> <p>需要注意的是它的 setLocaleContext 方法，直接抛异常出来，也就意味着 Locale 在后期不能被修改。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setLocaleContext</span><span class="token punctuation">(</span> <span class="token class-name">HttpServletRequest</span> request<span class="token punctuation">,</span> <span class="token annotation punctuation">@Nullable</span> <span class="token class-name">HttpServletResponse</span> response<span class="token punctuation">,</span>
		<span class="token annotation punctuation">@Nullable</span> <span class="token class-name">LocaleContext</span> localeContext<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UnsupportedOperationException</span><span class="token punctuation">(</span><span class="token string">&quot;Cannot change fixed locale - use a different locale resolution strategy&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-4-cookielocaleresolver"><a href="#_3-4-cookielocaleresolver" class="header-anchor">#</a> 3.4 CookieLocaleResolver</h3> <p>CookieLocaleResolver 和 SessionLocaleResolver 比较类似，只不过存储介质变成了 Cookie，其他都差不多，松哥就不再重复介绍了。</p> <h2 id="_4-附录"><a href="#_4-附录" class="header-anchor">#</a> 4.附录</h2> <p>搜刮了一个语言简称表，分享给各位小伙伴：</p> <table><thead><tr><th style="text-align:left;">语言</th> <th style="text-align:left;">简称</th></tr></thead> <tbody><tr><td style="text-align:left;">简体中文(中国)</td> <td style="text-align:left;">zh_CN</td></tr> <tr><td style="text-align:left;">繁体中文(中国台湾)</td> <td style="text-align:left;">zh_TW</td></tr> <tr><td style="text-align:left;">繁体中文(中国香港)</td> <td style="text-align:left;">zh_HK</td></tr> <tr><td style="text-align:left;">英语(中国香港)</td> <td style="text-align:left;">en_HK</td></tr> <tr><td style="text-align:left;">英语(美国)</td> <td style="text-align:left;">en_US</td></tr> <tr><td style="text-align:left;">英语(英国)</td> <td style="text-align:left;">en_GB</td></tr> <tr><td style="text-align:left;">英语(全球)</td> <td style="text-align:left;">en_WW</td></tr> <tr><td style="text-align:left;">英语(加拿大)</td> <td style="text-align:left;">en_CA</td></tr> <tr><td style="text-align:left;">英语(澳大利亚)</td> <td style="text-align:left;">en_AU</td></tr> <tr><td style="text-align:left;">英语(爱尔兰)</td> <td style="text-align:left;">en_IE</td></tr> <tr><td style="text-align:left;">英语(芬兰)</td> <td style="text-align:left;">en_FI</td></tr> <tr><td style="text-align:left;">芬兰语(芬兰)</td> <td style="text-align:left;">fi_FI</td></tr> <tr><td style="text-align:left;">英语(丹麦)</td> <td style="text-align:left;">en_DK</td></tr> <tr><td style="text-align:left;">丹麦语(丹麦)</td> <td style="text-align:left;">da_DK</td></tr> <tr><td style="text-align:left;">英语(以色列)</td> <td style="text-align:left;">en_IL</td></tr> <tr><td style="text-align:left;">希伯来语(以色列)</td> <td style="text-align:left;">he_IL</td></tr> <tr><td style="text-align:left;">英语(南非)</td> <td style="text-align:left;">en_ZA</td></tr> <tr><td style="text-align:left;">英语(印度)</td> <td style="text-align:left;">en_IN</td></tr> <tr><td style="text-align:left;">英语(挪威)</td> <td style="text-align:left;">en_NO</td></tr> <tr><td style="text-align:left;">英语(新加坡)</td> <td style="text-align:left;">en_SG</td></tr> <tr><td style="text-align:left;">英语(新西兰)</td> <td style="text-align:left;">en_NZ</td></tr> <tr><td style="text-align:left;">英语(印度尼西亚)</td> <td style="text-align:left;">en_ID</td></tr> <tr><td style="text-align:left;">英语(菲律宾)</td> <td style="text-align:left;">en_PH</td></tr> <tr><td style="text-align:left;">英语(泰国)</td> <td style="text-align:left;">en_TH</td></tr> <tr><td style="text-align:left;">英语(马来西亚)</td> <td style="text-align:left;">en_MY</td></tr> <tr><td style="text-align:left;">英语(阿拉伯)</td> <td style="text-align:left;">en_XA</td></tr> <tr><td style="text-align:left;">韩文(韩国)</td> <td style="text-align:left;">ko_KR</td></tr> <tr><td style="text-align:left;">日语(日本)</td> <td style="text-align:left;">ja_JP</td></tr> <tr><td style="text-align:left;">荷兰语(荷兰)</td> <td style="text-align:left;">nl_NL</td></tr> <tr><td style="text-align:left;">荷兰语(比利时)</td> <td style="text-align:left;">nl_BE</td></tr> <tr><td style="text-align:left;">葡萄牙语(葡萄牙)</td> <td style="text-align:left;">pt_PT</td></tr> <tr><td style="text-align:left;">葡萄牙语(巴西)</td> <td style="text-align:left;">pt_BR</td></tr> <tr><td style="text-align:left;">法语(法国)</td> <td style="text-align:left;">fr_FR</td></tr> <tr><td style="text-align:left;">法语(卢森堡)</td> <td style="text-align:left;">fr_LU</td></tr> <tr><td style="text-align:left;">法语(瑞士)</td> <td style="text-align:left;">fr_CH</td></tr> <tr><td style="text-align:left;">法语(比利时)</td> <td style="text-align:left;">fr_BE</td></tr> <tr><td style="text-align:left;">法语(加拿大)</td> <td style="text-align:left;">fr_CA</td></tr> <tr><td style="text-align:left;">西班牙语(拉丁美洲)</td> <td style="text-align:left;">es_LA</td></tr> <tr><td style="text-align:left;">西班牙语(西班牙)</td> <td style="text-align:left;">es_ES</td></tr> <tr><td style="text-align:left;">西班牙语(阿根廷)</td> <td style="text-align:left;">es_AR</td></tr> <tr><td style="text-align:left;">西班牙语(美国)</td> <td style="text-align:left;">es_US</td></tr> <tr><td style="text-align:left;">西班牙语(墨西哥)</td> <td style="text-align:left;">es_MX</td></tr> <tr><td style="text-align:left;">西班牙语(哥伦比亚)</td> <td style="text-align:left;">es_CO</td></tr> <tr><td style="text-align:left;">西班牙语(波多黎各)</td> <td style="text-align:left;">es_PR</td></tr> <tr><td style="text-align:left;">德语(德国)</td> <td style="text-align:left;">de_DE</td></tr> <tr><td style="text-align:left;">德语(奥地利)</td> <td style="text-align:left;">de_AT</td></tr> <tr><td style="text-align:left;">德语(瑞士)</td> <td style="text-align:left;">de_CH</td></tr> <tr><td style="text-align:left;">俄语(俄罗斯)</td> <td style="text-align:left;">ru_RU</td></tr> <tr><td style="text-align:left;">意大利语(意大利)</td> <td style="text-align:left;">it_IT</td></tr> <tr><td style="text-align:left;">希腊语(希腊)</td> <td style="text-align:left;">el_GR</td></tr> <tr><td style="text-align:left;">挪威语(挪威)</td> <td style="text-align:left;">no_NO</td></tr> <tr><td style="text-align:left;">匈牙利语(匈牙利)</td> <td style="text-align:left;">hu_HU</td></tr> <tr><td style="text-align:left;">土耳其语(土耳其)</td> <td style="text-align:left;">tr_TR</td></tr> <tr><td style="text-align:left;">捷克语(捷克共和国)</td> <td style="text-align:left;">cs_CZ</td></tr> <tr><td style="text-align:left;">斯洛文尼亚语</td> <td style="text-align:left;">sl_SL</td></tr> <tr><td style="text-align:left;">波兰语(波兰)</td> <td style="text-align:left;">pl_PL</td></tr> <tr><td style="text-align:left;">瑞典语(瑞典)</td> <td style="text-align:left;">sv_SE</td></tr> <tr><td style="text-align:left;">西班牙语(智利)</td> <td style="text-align:left;">es_CL</td></tr></tbody></table> <h2 id="_5-小结"><a href="#_5-小结" class="header-anchor">#</a> 5.小结</h2> <p>好啦，今天主要和小伙伴们聊了下 SpringMVC 中的国际化问题，以及 LocaleResolver 相关的源码，相信大家对 SpringMVC 的理解应该又更近一步了吧。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ssm/springmvc_advance/servlet_3_0_fileupload.html" class="prev">
        Servlet3.0 文件上传
      </a></span> <span class="next"><a href="/ssm/springmvc_advance/theme_resolver.html">
        深入 ThemeResolver
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.93cfb041.js" defer></script><script src="/assets/js/2.afd40777.js" defer></script><script src="/assets/js/245.fdcca161.js" defer></script>
  </body>
</html>

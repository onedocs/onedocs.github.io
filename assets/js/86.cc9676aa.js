(window.webpackJsonp=window.webpackJsonp||[]).push([[86],{434:function(e,a,t){"use strict";t.r(a);var s=t(42),r=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("p",[e._v("上篇文章我们介绍了五种数据类型中一些通用的命令，本文我们来看看 STRING 数据类型独有的操作命令。")]),e._v(" "),t("p",[e._v("本文是 Redis 系列的第三篇文章，了解前面的文章有助于更好的理解本文：")]),e._v(" "),t("hr"),e._v(" "),t("p",[e._v("1."),t("a",{attrs:{href:"https://mp.weixin.qq.com/s/NCm3zNGIDVMnlykeOiaH7Q",target:"_blank",rel:"noopener noreferrer"}},[e._v("Linux 上安装 Redis"),t("OutboundLink")],1),t("br"),e._v("\n2."),t("a",{attrs:{href:"http://mp.weixin.qq.com/s/jNSN8YO4jZbyjKR5C4in_w",target:"_blank",rel:"noopener noreferrer"}},[e._v("Redis 中的五种数据类型简介"),t("OutboundLink")],1)]),e._v(" "),t("hr"),e._v(" "),t("h2",{attrs:{id:"string"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#string"}},[e._v("#")]),e._v(" STRING")]),e._v(" "),t("h3",{attrs:{id:"append"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#append"}},[e._v("#")]),e._v(" APPEND")]),e._v(" "),t("p",[e._v("使用 APPEND 命令时，如果 key 已经存在，则会直接在 value 后追加值，如果 key 不存在，则会先创建一个 value 为空字符串的 key ，然后再追加：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> APPEND k1 hello\n(integer) 5\n127.0.0.1:6379> GET k1\n"hello"\n127.0.0.1:6379> APPEND k1 world\n(integer) 10\n127.0.0.1:6379> GET k1\n"helloworld"\n')])])]),t("h3",{attrs:{id:"decr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#decr"}},[e._v("#")]),e._v(" DECR")]),e._v(" "),t("p",[e._v("DECR 命令可以实现对 value 的减 1 操作，如果 key 不存在，则 key 对应的初始值会被置为 0 ，如果 key 的 value 不为数字，则会报错，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> SET k3 19\nOK\n127.0.0.1:6379> DECR k3\n(integer) 18\n127.0.0.1:6379> GET k3\n"18"\n127.0.0.1:6379> SET k4 aa\nOK\n127.0.0.1:6379> DECR k4\n(error) ERR value is not an integer or out of range\n')])])]),t("h3",{attrs:{id:"decrby"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#decrby"}},[e._v("#")]),e._v(" DECRBY")]),e._v(" "),t("p",[e._v("DECRBY 和 DECR 类似，不同的是 DECRBY 可以指定步长，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> GET k3\n"8"\n127.0.0.1:6379> DECRBY k3 4\n(integer) 4\n127.0.0.1:6379> GET k3\n"4"\n')])])]),t("h3",{attrs:{id:"get"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#get"}},[e._v("#")]),e._v(" GET")]),e._v(" "),t("p",[e._v("GET 命令用来获取对应 key 的 value，如果 key 不存在则返回 nil ，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1:6379> GET k5\n(nil)\n")])])]),t("h3",{attrs:{id:"getrange"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getrange"}},[e._v("#")]),e._v(" GETRANGE")]),e._v(" "),t("p",[e._v("GETRANGE 用来返回 key 所对应的 value 的子串，子串由 start 和 end 决定，从左往右计算，如果下标是负数，则从右往左计算，其中 -1 表示最后一个字符， -2 是倒数第二个...，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> SET k1 helloworld\nOK\n127.0.0.1:6379> GETRANGE k1 0 2\n"hel"\n127.0.0.1:6379> GETRANGE k1 -3 -1\n"rld"\n')])])]),t("h3",{attrs:{id:"getset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#getset"}},[e._v("#")]),e._v(" GETSET")]),e._v(" "),t("p",[e._v("GETSET 命令可以用来获取 key 所对应的 value ，并对 key 进行重置，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> SET k1 v1\nOK\n127.0.0.1:6379> GET k1\n"v1"\n127.0.0.1:6379> GETSET k1 vv\n"v1"\n127.0.0.1:6379> GET k1\n"vv"\n')])])]),t("h3",{attrs:{id:"incr"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#incr"}},[e._v("#")]),e._v(" INCR")]),e._v(" "),t("p",[e._v("INCR 操作可以对指定 key 的 value 执行加 1 操作，如果指定的 key 不存在，那么在加 1 操作之前，会先将 key 的 value 设置为 0 ，如果 key 的 value 不是数字，则会报错。如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1:6379> INCR k2\n(integer) 1\n")])])]),t("h3",{attrs:{id:"incrby"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#incrby"}},[e._v("#")]),e._v(" INCRBY")]),e._v(" "),t("p",[e._v("INCRBY 和 INCR 功能类似，不同的是可以指定增长的步长，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1:6379> INCRBY k2 99\n(integer) 100\n")])])]),t("h3",{attrs:{id:"incrbyfloat"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#incrbyfloat"}},[e._v("#")]),e._v(" INCRBYFLOAT")]),e._v(" "),t("p",[e._v("INCRBYFLOAT 命令可以用来增长浮点数，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> SET k1 0.5\nOK\n127.0.0.1:6379> INCRBYFLOAT k1 0.33\n"0.83"\n')])])]),t("h3",{attrs:{id:"mget与mset"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mget与mset"}},[e._v("#")]),e._v(" MGET与MSET")]),e._v(" "),t("p",[e._v("MGET 与 MSET 分别用来批量设置值和批量获取值，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> MSET k1 v1 k2 v2 k3 v3\nOK\n127.0.0.1:6379> MGET k1 k2 k3\n1) "v1"\n2) "v2"\n3) "v3"\n')])])]),t("h3",{attrs:{id:"setex"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setex"}},[e._v("#")]),e._v(" SETEX")]),e._v(" "),t("p",[e._v("SETEX 用来给 key 设置 value ，同时设置过期时间，等效于先给 key 设置 value ，再给 key 设置过期时间，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> SETEX k1 30 v1\nOK\n127.0.0.1:6379> TTL k1\n(integer) 26\n127.0.0.1:6379> GET k1\n"v1"\n')])])]),t("h3",{attrs:{id:"psetex"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#psetex"}},[e._v("#")]),e._v(" PSETEX")]),e._v(" "),t("p",[e._v("PSETEX 的作用和 SETEX 类似，不同的是，这里设置过期时间的单位是毫秒，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1:6379> PSETEX k1 60000 v1\nOK\n127.0.0.1:6379> PTTL k1\n(integer) 55412\n")])])]),t("h3",{attrs:{id:"setnx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setnx"}},[e._v("#")]),e._v(" SETNX")]),e._v(" "),t("p",[e._v("SETNX 是 "),t("strong",[e._v("SET")]),e._v(" if "),t("strong",[e._v("N")]),e._v("ot e"),t("strong",[e._v("X")]),e._v("ists 的简写，SET 命令在执行时，如果 key 已经存在，则新值会覆盖掉旧值，而对于 SETNX 命令，如果 key 已经存在，则不做任何操作，如果 key 不存在，则效果等同于 SET 命令。如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> SETNX k1 v1\n(integer) 1\n127.0.0.1:6379> SETNX k1 vv\n(integer) 0\n127.0.0.1:6379> GET k1\n"v1"\n')])])]),t("h3",{attrs:{id:"msetnx"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#msetnx"}},[e._v("#")]),e._v(" MSETNX")]),e._v(" "),t("p",[e._v("MSETNX 兼具了 SETNX 和 MSET 的特性，但是 MSETNX 在执行时，如果有一个 key 存在，则所有的都不会执行，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1:6379> MSETNX k1 v1 k2 v2\n(integer) 0\n")])])]),t("p",[e._v("因为 k1 已经存在，所以 k2 也没执行成功。")]),e._v(" "),t("h3",{attrs:{id:"setrange"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setrange"}},[e._v("#")]),e._v(" SETRANGE")]),e._v(" "),t("p",[e._v("SETRANGE 用来覆盖一个已经存在的 key 的 value ，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> set k1 helloworld\nOK\n127.0.0.1:6379> get k1\n"helloworld"\n127.0.0.1:6379> SETRANGE k1 5 redis\n(integer) 10\n127.0.0.1:6379> get k1\n"helloredis"\n')])])]),t("p",[e._v("但是如果已经存在的 key 的 value 长度小于 offset ，则不足的地方用 0 补齐，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v('127.0.0.1:6379> set k1 helloredis\nOK\n127.0.0.1:6379> SETRANGE k1 20 --java\n(integer) 26\n127.0.0.1:6379> GET k1\n"helloredis\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00--java"\n')])])]),t("h3",{attrs:{id:"strlen"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#strlen"}},[e._v("#")]),e._v(" STRLEN")]),e._v(" "),t("p",[e._v("STRLEN 用来计算 key 的 value 的长度，如下：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("127.0.0.1:6379> STRLEN k1\n(integer) 26\n")])])]),t("p",[e._v("OK,STRING 相关的命令我们就介绍这么多，当然还有很多其他的，小伙伴们可以参考"),t("a",{attrs:{href:"http://www.redis.cn/commands.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("官方文档"),t("OutboundLink")],1),e._v("。小伙伴在看官方文档时，有什么问题欢迎留言讨论。")])])}),[],!1,null,null,null);a.default=r.exports}}]);